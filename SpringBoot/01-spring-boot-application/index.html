


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tech Notes">
      
      
      
        <meta name="author" content="Nan Lei">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.7">
    
    
      
        <title>Standalone Application - Tech Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.b8ac9624.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.28f3ef9a.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-maven" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Tech Notes" class="md-header-nav__button md-logo" aria-label="Tech Notes">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Tech Notes
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Standalone Application
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/nanlei/my-notes/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="./" class="md-tabs__link md-tabs__link--active">
          Framework
        </a>
      
    </li>
  

  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../DataBase/MySQL/master-slave/" class="md-tabs__link">
          DataBase
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../DevOps/devops-centos/" class="md-tabs__link">
          DevOps
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tech Notes" class="md-nav__button md-logo" aria-label="Tech Notes">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Tech Notes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/nanlei/my-notes/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Framework
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Framework" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-1">
      Spring Boot
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Spring Boot" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Spring Boot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1-1" type="checkbox" id="nav-2-1-1" checked>
    
    <label class="md-nav__link" for="nav-2-1-1">
      Notes
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Standalone Application
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Standalone Application" class="md-nav__link md-nav__link--active">
      Standalone Application
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-maven" class="md-nav__link">
    1. ä½¿ç”¨Mavenå‘½ä»¤è¡Œæ„å»ºé¡¹ç›®
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-spring-boot" class="md-nav__link">
    2. å›¾å½¢åŒ–æ„å»ºSpring Bootåº”ç”¨
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-spring-bootjar" class="md-nav__link">
    3. åˆ›å»ºSpring Bootåº”ç”¨ç¨‹åºçš„å¯æ‰§è¡ŒJAR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-spring-bootjar" class="md-nav__link">
    4. Spring Bootå¯æ‰§è¡ŒJARèµ„æºç»“æ„
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-jarspring-boot-loader" class="md-nav__link">
    5. JARæ‰§è¡Œæ¨¡å—spring-boot-loader
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-jarlauncher" class="md-nav__link">
    6. JarLauncherçš„å®ç°åŸç†
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-warlauncher" class="md-nav__link">
    7. WarLauncherçš„å·®å¼‚
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-spring-boot-maven-dependency/" title="Maven Dependencies" class="md-nav__link">
      Maven Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-spring-boot-embedded-web-server/" title="Embedded Web Server" class="md-nav__link">
      Embedded Web Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-spring-boot-understanding-auto-config/" title="Understanding Auto-Configuration" class="md-nav__link">
      Understanding Auto-Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-spring-boot-understanding-prod-ready/" title="Understanding Production-Ready" class="md-nav__link">
      Understanding Production-Ready
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1-2" type="checkbox" id="nav-2-1-2">
    
    <label class="md-nav__link" for="nav-2-1-2">
      Application Samples
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Application Samples" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Application Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../app-shardingsphere-master-slave-mysql/" title="Shardingsphere master-slave with MySQL" class="md-nav__link">
      Shardingsphere master-slave with MySQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      DataBase
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DataBase" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        DataBase
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      MySQL
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MySQL" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MySQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DataBase/MySQL/master-slave/" title="Master Slave" class="md-nav__link">
      Master Slave
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      MongoDB
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MongoDB" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MongoDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DataBase/MongoDB/replica-set/" title="Replica Set" class="md-nav__link">
      Replica Set
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      DevOps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DevOps" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        DevOps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Linux
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Linux" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/devops-centos/" title="CentOS" class="md-nav__link">
      CentOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/devops-ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Docker
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/docker/" title="Basic" class="md-nav__link">
      Basic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      About
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="About" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="Who Am I" class="md-nav__link">
      Who Am I
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-maven" class="md-nav__link">
    1. ä½¿ç”¨Mavenå‘½ä»¤è¡Œæ„å»ºé¡¹ç›®
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-spring-boot" class="md-nav__link">
    2. å›¾å½¢åŒ–æ„å»ºSpring Bootåº”ç”¨
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-spring-bootjar" class="md-nav__link">
    3. åˆ›å»ºSpring Bootåº”ç”¨ç¨‹åºçš„å¯æ‰§è¡ŒJAR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-spring-bootjar" class="md-nav__link">
    4. Spring Bootå¯æ‰§è¡ŒJARèµ„æºç»“æ„
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-jarspring-boot-loader" class="md-nav__link">
    5. JARæ‰§è¡Œæ¨¡å—spring-boot-loader
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-jarlauncher" class="md-nav__link">
    6. JarLauncherçš„å®ç°åŸç†
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-warlauncher" class="md-nav__link">
    7. WarLauncherçš„å·®å¼‚
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nanlei/my-notes/edit/master/docs/SpringBoot/01-spring-boot-application.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Standalone Application</h1>
                
                <h3 align="center"><b>01 - Spring Boot åº”ç”¨ç¨‹åº</b></h3>

<h4 id="1-maven">1. ä½¿ç”¨Mavenå‘½ä»¤è¡Œæ„å»ºé¡¹ç›®<a class="headerlink" href="#1-maven" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code>$ mvn archetype:generate -DgroupId=deep-in-spring-boot -DartifactId=first-spring-boot-application -Dversion=1.0.0-SNAPSHOT -DinteractiveMode=false -Dpackage=deep.in.spring.boot
</code></pre></div>
ç±»ä¼¼ç»“æœï¼š
<div class="highlight"><pre><span></span><code>[INFO] Scanning for projects...
([INFO] 
[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] --------------------------------[ pom ]---------------------------------
[INFO] 
[INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.0:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;
[INFO] 
[INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.0:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;
[INFO] 
[INFO] )
[INFO] --- maven-archetype-plugin:3.2.0:generate (default-cli) @ standalone-pom ---
[INFO] Generating project in Batch mode
[WARNING] No archetype found in remote catalog. Defaulting to internal catalog
[INFO] No archetype defined. Using maven-archetype-quickstart (org.apache.maven.archetypes:maven-archetype-quickstart:1.0)
[INFO] ----------------------------------------------------------------------------
[INFO] Using following parameters for creating project from Old (1.x) Archetype: maven-archetype-quickstart:1.0
[INFO] ----------------------------------------------------------------------------
[INFO] Parameter: basedir, Value: /Users/nanlei/Dev/Workspace
[INFO] Parameter: package, Value: deep.in.spring.boot
[INFO] Parameter: groupId, Value: deep-in-spring-boot
[INFO] Parameter: artifactId, Value: first-spring-boot-application
[INFO] Parameter: packageName, Value: deep.in.spring.boot
[INFO] Parameter: version, Value: 1.0.0-SNAPSHOT
[INFO] project created from Old (1.x) Archetype in dir: /Users/nanlei/Dev/Workspace/first-spring-boot-application
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  1.475 s
[INFO] Finished at: 2020-08-01T23:51:37+08:00
</code></pre></div></p>
<p><code>archetype</code>æ˜¯Mavenæ’ä»¶<code>maven-archetype-plugin</code>çš„ç®€ç§°<br />
æ’ä»¶ç›®æ ‡ï¼š<code>archetype:generate</code> <br />
æ’ä»¶å‚æ•°ï¼šGAVä¿¡æ¯<code>groupId</code>ï¼Œ<code>artifactId</code>ï¼Œ<code>version</code>å’ŒåŒ…å<code>package</code>  <br />
äº¤äº’å¼å‚æ•°ï¼š<code>interactiveMode</code>ä¸º<code>false</code>ï¼Œä½¿ç”¨é™é»˜æ–¹å¼</p>
<p>æŸ¥çœ‹é¡¹ç›®ç»“æ„ï¼š
<div class="highlight"><pre><span></span><code>$ cd first-spring-boot-application/
$ ls -ls
total 8
8 -rw-r--r--  1 nanlei  staff  692 Aug  1 23:51 pom.xml
0 drwxr-xr-x  4 nanlei  staff  128 Aug  1 23:51 src
</code></pre></div></p>
<p>å®‰è£…treeç»„ä»¶å¹¶å†æ¬¡æŸ¥çœ‹ï¼š
<div class="highlight"><pre><span></span><code>$ brew install tree
==&gt; Downloading https://mirrors.aliyun.com/homebrew/homebrew-bottles/bottles/tree-1.8.0.catalina.bottle.tar.
######################################################################## 100.0%
==&gt; Pouring tree-1.8.0.catalina.bottle.tar.gz
ğŸº  /usr/local/Cellar/tree/1.8.0: 8 files, 121.1KB
$ tree
.
â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ deep
    â”‚           â””â”€â”€ in
    â”‚               â””â”€â”€ spring
    â”‚                   â””â”€â”€ boot
    â”‚                       â””â”€â”€ App.java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ deep
                â””â”€â”€ in
                    â””â”€â”€ spring
                        â””â”€â”€ boot
                            â””â”€â”€ AppTest.java

13 directories, 3 files
</code></pre></div></p>
<p><code>App.java</code>æ˜¯å¼•å¯¼ç±»ï¼Œ<code>AppTest.java</code>æ˜¯å•å…ƒæµ‹è¯•ç±»<br />
åœ¨<code>pom.xml</code>ä¸­ï¼Œ<code>archetype</code>æ’ä»¶æ·»åŠ äº†<code>junit</code>çš„ä¾èµ–</p>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ Spring Bootçš„webä¾èµ–ï¼š
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.3.1.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></p>
<p>æŸ¥çœ‹é¡¹ç›®<code>dependency</code>æ ‘çš„å˜åŒ–ï¼š
<div class="highlight"><pre><span></span><code>$ mvn dependency:tree -Dincludes=org.springframework*
[INFO] Scanning for projects...
[INFO] 
[INFO] ---------&lt; deep-in-spring-boot:first-spring-boot-application &gt;----------
[INFO] Building first-spring-boot-application 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ first-spring-boot-application ---
[INFO] deep-in-spring-boot:first-spring-boot-application:jar:1.0.0-SNAPSHOT
[INFO] \- org.springframework.boot:spring-boot-starter-web:jar:2.3.1.RELEASE:compile
[INFO]    +- org.springframework.boot:spring-boot-starter:jar:2.3.1.RELEASE:compile
[INFO]    |  +- org.springframework.boot:spring-boot:jar:2.3.1.RELEASE:compile
[INFO]    |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.3.1.RELEASE:compile
[INFO]    |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.3.1.RELEASE:compile
[INFO]    |  \- org.springframework:spring-core:jar:5.2.7.RELEASE:compile
[INFO]    |     \- org.springframework:spring-jcl:jar:5.2.7.RELEASE:compile
[INFO]    +- org.springframework.boot:spring-boot-starter-json:jar:2.3.1.RELEASE:compile
[INFO]    +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.3.1.RELEASE:compile
[INFO]    +- org.springframework:spring-web:jar:5.2.7.RELEASE:compile
[INFO]    |  \- org.springframework:spring-beans:jar:5.2.7.RELEASE:compile
[INFO]    \- org.springframework:spring-webmvc:jar:5.2.7.RELEASE:compile
[INFO]       +- org.springframework:spring-aop:jar:5.2.7.RELEASE:compile
[INFO]       +- org.springframework:spring-context:jar:5.2.7.RELEASE:compile
[INFO]       \- org.springframework:spring-expression:jar:5.2.7.RELEASE:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.802 s
[INFO] Finished at: 2020-08-02T00:45:55+08:00
[INFO] ------------------------------------------------------------------------
</code></pre></div></p>
<p>ç¼–å†™<code>App.java</code>ä»£ç ï¼š
<div class="highlight"><pre><span></span><code><span class="nd">@RestController</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="p">{</span>

    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Welcome to Spring Boot!&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>ä½¿ç”¨Mavenæ’ä»¶æ–¹å¼<code>mvn spring-boot:run</code>è¿è¡Œé¡¹ç›®ï¼š
<div class="highlight"><pre><span></span><code>$ mvn spring-boot:run
[INFO] Scanning for projects...
Downloading from aliyun-maven: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-metadata.xml
Downloading from aliyun-maven: http://maven.aliyun.com/nexus/content/groups/public/org/codehaus/mojo/maven-metadata.xml
Downloaded from aliyun-maven: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-metadata.xml (9.9 kB at 4.4 kB/s)
Downloaded from aliyun-maven: http://maven.aliyun.com/nexus/content/groups/public/org/codehaus/mojo/maven-metadata.xml (21 kB at 8.7 kB/s)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.835 s
[INFO] Finished at: 2020-08-02T01:00:07+08:00
[INFO] ------------------------------------------------------------------------
[ERROR] No plugin found for prefix &#39;spring-boot&#39; in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/nanlei/.m2/repository), aliyun-maven (http://maven.aliyun.com/nexus/content/groups/public/)] -&gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException
</code></pre></div></p>
<p>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<br />
<a href="https://docs.spring.io/spring-boot/docs/current/reference">https://docs.spring.io/spring-boot/docs/current/reference</a>  </p>
<p>æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p>
<blockquote>
<p>2.4.4. Running the Example<br />
At this point, your application should work. Since you used the <code>spring-boot-starter-parent</code> POM, you have a useful run goal that you can use to start the application. Type <code>mvn spring-boot:run</code> from the root project directory to start the application. </p>
</blockquote>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ <code>spring-boot-starter-parent</code>ï¼š
<div class="highlight"><pre><span></span><code><span class="nt">&lt;parent&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.3.1.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/parent&gt;</span>
</code></pre></div></p>
<p>å†æ¬¡è¿è¡Œï¼š
<div class="highlight"><pre><span></span><code>$ mvn spring-boot:run
[INFO] Scanning for projects...
[INFO] 
[INFO] ---------&lt; deep-in-spring-boot:first-spring-boot-application &gt;----------
[INFO] Building first-spring-boot-application 1.0.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] &gt;&gt;&gt; spring-boot-maven-plugin:2.3.1.RELEASE:run (default-cli) &gt; test-compile @ first-spring-boot-application &gt;&gt;&gt;
[INFO] 
[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ first-spring-boot-application ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Workspace/first-spring-boot-application/src/main/resources
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Workspace/first-spring-boot-application/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ first-spring-boot-application ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ first-spring-boot-application ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Workspace/first-spring-boot-application/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ first-spring-boot-application ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.3.1.RELEASE:run (default-cli) &lt; test-compile @ first-spring-boot-application &lt;&lt;&lt;
[INFO] 
[INFO] 
[INFO] --- spring-boot-maven-plugin:2.3.1.RELEASE:run (default-cli) @ first-spring-boot-application ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.1.RELEASE)

2020-08-02 01:13:46.642  INFO 6736 --- [           main] deep.in.spring.boot.App                  : Starting App on nanleis-MacBook-Pro.local with PID 6736 (/Users/nanlei/Dev/Workspace/first-spring-boot-application/target/classes started by nanlei in /Users/nanlei/Dev/Workspace/first-spring-boot-application)
2020-08-02 01:13:46.644  INFO 6736 --- [           main] deep.in.spring.boot.App                  : No active profile set, falling back to default profiles: default
2020-08-02 01:13:47.141  INFO 6736 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2020-08-02 01:13:47.147  INFO 6736 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-08-02 01:13:47.148  INFO 6736 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.36]
2020-08-02 01:13:47.181  INFO 6736 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-08-02 01:13:47.181  INFO 6736 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 507 ms
2020-08-02 01:13:47.268  INFO 6736 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-02 01:13:47.352  INFO 6736 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;
2020-08-02 01:13:47.359  INFO 6736 --- [           main] deep.in.spring.boot.App                  : Started App in 0.917 seconds (JVM running for 1.155)
</code></pre></div></p>
<p>æ£€æŸ¥HTTPæœåŠ¡å’Œæ‰€å†™ä»£ç ï¼š
<div class="highlight"><pre><span></span><code>$ curl http://127.0.0.1:8080/
Welcome to Spring Boot
</code></pre></div></p>
<h4 id="2-spring-boot">2. å›¾å½¢åŒ–æ„å»ºSpring Bootåº”ç”¨<a class="headerlink" href="#2-spring-boot" title="Permanent link">&para;</a></h4>
<p><a href="https://start.spring.io/">https://start.spring.io/</a></p>
<p><img alt="start.spring.io" src="../img/start.spring.io.png" /></p>
<p>æ‹·è´ç”Ÿæˆå¥½çš„zipåŒ…åˆ°é¡¹ç›®ç›®å½•ï¼š
<div class="highlight"><pre><span></span><code>$ cp ~/Downloads/first-application-by-gui.zip .
</code></pre></div></p>
<p>è§£å‹ç¼©è¯¥æ–‡ä»¶ï¼š
<div class="highlight"><pre><span></span><code>$ unzip first-application-by-gui.zip 
Archive:  first-application-by-gui.zip
   creating: first-application-by-gui/
   creating: first-application-by-gui/.mvn/
   creating: first-application-by-gui/.mvn/wrapper/
  inflating: first-application-by-gui/.mvn/wrapper/maven-wrapper.properties  
  inflating: first-application-by-gui/.mvn/wrapper/MavenWrapperDownloader.java  
  inflating: first-application-by-gui/.mvn/wrapper/maven-wrapper.jar  
  inflating: first-application-by-gui/mvnw  
  inflating: first-application-by-gui/.gitignore  
  inflating: first-application-by-gui/HELP.md  
  inflating: first-application-by-gui/mvnw.cmd  
   creating: first-application-by-gui/src/
   creating: first-application-by-gui/src/main/
   creating: first-application-by-gui/src/main/resources/
   creating: first-application-by-gui/src/main/resources/templates/
  inflating: first-application-by-gui/src/main/resources/application.properties  
   creating: first-application-by-gui/src/main/resources/static/
   creating: first-application-by-gui/src/main/java/
   creating: first-application-by-gui/src/main/java/deep/
   creating: first-application-by-gui/src/main/java/deep/in/
   creating: first-application-by-gui/src/main/java/deep/in/spring/
   creating: first-application-by-gui/src/main/java/deep/in/spring/boot/
  inflating: first-application-by-gui/src/main/java/deep/in/spring/boot/FirstApplicationByGuiApplication.java  
   creating: first-application-by-gui/src/test/
   creating: first-application-by-gui/src/test/java/
   creating: first-application-by-gui/src/test/java/deep/
   creating: first-application-by-gui/src/test/java/deep/in/
   creating: first-application-by-gui/src/test/java/deep/in/spring/
   creating: first-application-by-gui/src/test/java/deep/in/spring/boot/
  inflating: first-application-by-gui/src/test/java/deep/in/spring/boot/FirstApplicationByGuiApplicationTests.java  
  inflating: first-application-by-gui/pom.xml  
</code></pre></div></p>
<p>ä½¿ç”¨<code>tree</code>å‘½ä»¤æŸ¥çœ‹ï¼š
<div class="highlight"><pre><span></span><code>$ tree -a first-application-by-gui
first-application-by-gui
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .mvn
â”‚   â””â”€â”€ wrapper
â”‚       â”œâ”€â”€ MavenWrapperDownloader.java
â”‚       â”œâ”€â”€ maven-wrapper.jar
â”‚       â””â”€â”€ maven-wrapper.properties
â”œâ”€â”€ HELP.md
â”œâ”€â”€ mvnw
â”œâ”€â”€ mvnw.cmd
â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ deep
    â”‚   â”‚       â””â”€â”€ in
    â”‚   â”‚           â””â”€â”€ spring
    â”‚   â”‚               â””â”€â”€ boot
    â”‚   â”‚                   â””â”€â”€ FirstApplicationByGuiApplication.java
    â”‚   â””â”€â”€ resources
    â”‚       â”œâ”€â”€ application.properties
    â”‚       â”œâ”€â”€ static
    â”‚       â””â”€â”€ templates
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ deep
                â””â”€â”€ in
                    â””â”€â”€ spring
                        â””â”€â”€ boot
                            â””â”€â”€ FirstApplicationByGuiApplicationTests.java

18 directories, 11 files
</code></pre></div></p>
<p><code>.gitignore</code> æ–‡ä»¶å®šä¹‰äº†å¸¸è§çš„æ–‡ä»¶æˆ–ç›®å½•çš„ç‰ˆæœ¬æ§åˆ¶å¿½ç•¥åå•ï¼Œæ¯”å¦‚ï¼š
<div class="highlight"><pre><span></span><code>HELP.md
target/
!.mvn/wrapper/maven-wrapper.jar
!**/src/main/**/target/
!**/src/test/**/target/

### STS ###
.apt_generated
.classpath
.factorypath
.project
.settings
.springBeans
.sts4-cache

### IntelliJ IDEA ###
.idea
*.iws
*.iml
*.ipr

### NetBeans ###
/nbproject/private/
/nbbuild/
/dist/
/nbdist/
/.nb-gradle/
build/
!**/src/main/**/build/
!**/src/test/**/build/

### VS Code ###
.vscode/
</code></pre></div></p>
<p>Maven Wrapperæ–‡ä»¶åŒ…å«<code>.mvn</code>ç›®å½•ã€<code>mvnw</code>å’Œ<code>mvnw.cmd</code>æ–‡ä»¶ï¼Œ<br />
å‚è€ƒï¼š<a href="https://github.com/takari/maven-wrapper">https://github.com/takari/maven-wrapper</a><br />
å¯ä»¥ä¸å®‰è£…Mavenè€Œç›´æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<blockquote>
<p>Normally you instruct users to install a specific version of Apache Maven, put it on the PATH and then run the mvn command like the following:<br />
<div class="highlight"><pre><span></span><code>mvn clean install
</code></pre></div>
But now, with a Maven Wrapper setup, you can instruct users to run wrapper scripts:<br />
<div class="highlight"><pre><span></span><code>./mvnw clean install
</code></pre></div></p>
</blockquote>
<p><code>application.properties</code>æ–‡ä»¶  æ˜¯Spring Booté»˜è®¤çš„åº”ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œå…¶é…ç½®å±æ€§å¯ä»¥å½±å“åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</p>
<p><code>FirstApplicationByGuiApplicationTests.java</code>æ–‡ä»¶  æ˜¯Spring Bootå•å…ƒæµ‹è¯•çš„æ¨¡ç‰ˆJUnitæ–‡ä»¶ï¼Œå…¶è·¯å¾„å’Œå¯¹åº”çš„å¼•å¯¼æ–‡ä»¶<code>FirstApplicationByGuiApplication.java</code>å¯¹åº”ã€‚</p>
<p>å¯åŠ¨é¡¹ç›®å¹¶è®¿é—®ï¼š
<div class="highlight"><pre><span></span><code>$ curl http://127.0.0.1:8080/
{&quot;timestamp&quot;:&quot;2020-08-02T08:57:15.817+00:00&quot;,&quot;status&quot;:404,&quot;error&quot;:&quot;Not Found&quot;,&quot;message&quot;:&quot;&quot;,&quot;path&quot;:&quot;/&quot;}
</code></pre></div></p>
<p>å› é¡¹ç›®æ²¡æœ‰ç¼–å†™é»˜è®¤æœåŠ¡è€ŒæŠ¥404é”™è¯¯  </p>
<p>å®‰è£…<code>jsonpp</code>æŸ¥çœ‹JSONå“åº”ï¼š
<div class="highlight"><pre><span></span><code>$ brew install jsonpp
==&gt; Downloading https://mirrors.aliyun.com/homebrew/homebrew-bottles/bottles/jsonpp-1.3.0_1.catalina.bottle.tar.gz
######################################################################## 100.0%
==&gt; Pouring jsonpp-1.3.0_1.catalina.bottle.tar.gz
ğŸº  /usr/local/Cellar/jsonpp/1.3.0_1: 5 files, 2.4MB
</code></pre></div></p>
<p>å†æ¬¡è®¿é—®ï¼š
<div class="highlight"><pre><span></span><code>$ curl http://127.0.0.1:8080 | jsonpp
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   102    0   102    0     0  20400      0 --:--:-- --:--:-- --:--:-- 20400
{
  &quot;timestamp&quot;: &quot;2020-08-02T09:03:24.359+00:00&quot;,
  &quot;status&quot;: 404,
  &quot;error&quot;: &quot;Not Found&quot;,
  &quot;message&quot;: &quot;&quot;,
  &quot;path&quot;: &quot;/&quot;
}
</code></pre></div></p>
<h4 id="3-spring-bootjar">3. åˆ›å»ºSpring Bootåº”ç”¨ç¨‹åºçš„å¯æ‰§è¡ŒJAR<a class="headerlink" href="#3-spring-bootjar" title="Permanent link">&para;</a></h4>
<blockquote>
<p>2.4.5. Creating an Executable Jar<br />
We finish our example by creating a completely self-contained executable jar file that we could run in production. Executable jars (sometimes called â€œfat jarsâ€) are archives containing your compiled classes along with all of the jar dependencies that your code needs to run.</p>
</blockquote>
<p>å¯æ‰§è¡Œçš„JARåˆç§°ä¸ºâ€œfat jarsâ€</p>
<blockquote>
<p>To create an executable jar, we need to add the <code>spring-boot-maven-plugin</code> to our <code>pom.xml</code>. To do so, insert the following lines just below the <code>dependencies</code> section:</p>
</blockquote>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£è§£é‡Šï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹åˆ°<code>pom.xml</code>ä¸­ï¼š
<div class="highlight"><pre><span></span><code><span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></p>
<p>ç„¶åæ‰§è¡Œ<code>mvn package</code>å‘½ä»¤ï¼š
<div class="highlight"><pre><span></span><code>$ mvn package
[INFO] Scanning for projects...
[INFO] 
[INFO] ------------&lt; deep-in-spring-boot:first-application-by-gui &gt;------------
[INFO] Building first-application-by-gui 0.0.1-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
(çœç•¥éƒ¨åˆ†å†…å®¹...)
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
(çœç•¥éƒ¨åˆ†å†…å®¹...)
  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.2.RELEASE)

2020-08-02 17:15:06.025  INFO 4060 --- [           main] .b.FirstApplicationByGuiApplicationTests : Starting FirstApplicationByGuiApplicationTests on nanleis-MacBook-Pro.local with PID 4060 (started by nanlei in /Users/nanlei/Dev/Workspace/first-application-by-gui)
2020-08-02 17:15:06.026  INFO 4060 --- [           main] .b.FirstApplicationByGuiApplicationTests : No active profile set, falling back to default profiles: default
2020-08-02 17:15:06.709  INFO 4060 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-02 17:15:06.958  INFO 4060 --- [           main] .b.FirstApplicationByGuiApplicationTests : Started FirstApplicationByGuiApplicationTests in 1.075 seconds (JVM running for 1.706)
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.508 s - in deep.in.spring.boot.FirstApplicationByGuiApplicationTests
2020-08-02 17:15:07.127  INFO 4060 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &#39;applicationTaskExecutor&#39;
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- maven-jar-plugin:3.2.0:jar (default-jar) @ first-application-by-gui ---
[INFO] Building jar: /Users/nanlei/Dev/Workspace/first-application-by-gui/target/first-application-by-gui-0.0.1-SNAPSHOT.jar
[INFO] 
[INFO] --- spring-boot-maven-plugin:2.3.2.RELEASE:repackage (repackage) @ first-application-by-gui ---
[INFO] Replacing main artifact with repackaged archive
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.535 s
[INFO] Finished at: 2020-08-02T17:15:07+08:00
[INFO] ------------------------------------------------------------------------
</code></pre></div></p>
<p>æœ€ç»ˆç”Ÿæˆçš„<code>first-application-by-gui-0.0.1-SNAPSHOT.jar</code>å°±åœ¨<code>target</code>ç›®å½•ä¸‹ï¼Œä½¿ç”¨<code>java -jar</code>å‘½ä»¤è¿è¡ŒJARï¼š
<div class="highlight"><pre><span></span><code>$ java -jar target/first-application-by-gui-0.0.1-SNAPSHOT.jar

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.2.RELEASE)

2020-08-02 17:24:33.034  INFO 4219 --- [           main] d.i.s.b.FirstApplicationByGuiApplication : Starting FirstApplicationByGuiApplication v0.0.1-SNAPSHOT on nanleis-MacBook-Pro.local with PID 4219 (/Users/nanlei/Dev/Workspace/first-application-by-gui/target/first-application-by-gui-0.0.1-SNAPSHOT.jar started by nanlei in /Users/nanlei/Dev/Workspace/first-application-by-gui)
2020-08-02 17:24:33.036  INFO 4219 --- [           main] d.i.s.b.FirstApplicationByGuiApplication : No active profile set, falling back to default profiles: default
2020-08-02 17:24:33.800  INFO 4219 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2020-08-02 17:24:33.809  INFO 4219 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-08-02 17:24:33.810  INFO 4219 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.37]
2020-08-02 17:24:33.865  INFO 4219 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-08-02 17:24:33.865  INFO 4219 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 785 ms
2020-08-02 17:24:34.031  INFO 4219 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-02 17:24:34.221  INFO 4219 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;
2020-08-02 17:24:34.231  INFO 4219 --- [           main] d.i.s.b.FirstApplicationByGuiApplication : Started FirstApplicationByGuiApplication in 1.523 seconds (JVM running for 1.894)
</code></pre></div></p>
<p><code>java -jar</code>æ–¹å¼å’Œ<code>mvn spring-boot:run</code>æ–¹å¼åŸºæœ¬æ— å¼‚</p>
<h4 id="4-spring-bootjar">4. Spring Bootå¯æ‰§è¡ŒJARèµ„æºç»“æ„<a class="headerlink" href="#4-spring-bootjar" title="Permanent link">&para;</a></h4>
<p>åœ¨<code>target</code>ç›®å½•ä¸‹æ‰§è¡Œ<code>tree -h</code>
<div class="highlight"><pre><span></span><code>$ tree -h
.
â”œâ”€â”€ [ 128]  classes
â”‚Â Â  â”œâ”€â”€ [   1]  application.properties
â”‚Â Â  â””â”€â”€ [  96]  deep
â”‚Â Â      â””â”€â”€ [  96]  in
â”‚Â Â          â””â”€â”€ [  96]  spring
â”‚Â Â              â””â”€â”€ [  96]  boot
â”‚Â Â                  â””â”€â”€ [ 790]  FirstApplicationByGuiApplication.class
â”œâ”€â”€ [ 16M]  first-application-by-gui-0.0.1-SNAPSHOT.jar
â”œâ”€â”€ [3.0K]  first-application-by-gui-0.0.1-SNAPSHOT.jar.original
â”œâ”€â”€ [  96]  generated-sources
â”‚Â Â  â””â”€â”€ [  64]  annotations
â”œâ”€â”€ [  96]  generated-test-sources
â”‚Â Â  â””â”€â”€ [  64]  test-annotations
â”œâ”€â”€ [  96]  maven-archiver
â”‚Â Â  â””â”€â”€ [  87]  pom.properties
â”œâ”€â”€ [  96]  maven-status
â”‚Â Â  â””â”€â”€ [ 128]  maven-compiler-plugin
â”‚Â Â      â”œâ”€â”€ [  96]  compile
â”‚Â Â      â”‚Â Â  â””â”€â”€ [ 128]  default-compile
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ [  59]  createdFiles.lst
â”‚Â Â      â”‚Â Â      â””â”€â”€ [ 125]  inputFiles.lst
â”‚Â Â      â””â”€â”€ [  96]  testCompile
â”‚Â Â          â””â”€â”€ [ 128]  default-testCompile
â”‚Â Â              â”œâ”€â”€ [  64]  createdFiles.lst
â”‚Â Â              â””â”€â”€ [ 130]  inputFiles.lst
â”œâ”€â”€ [ 128]  surefire-reports
â”‚Â Â  â”œâ”€â”€ [ 18K]  TEST-deep.in.spring.boot.FirstApplicationByGuiApplicationTests.xml
â”‚Â Â  â””â”€â”€ [ 363]  deep.in.spring.boot.FirstApplicationByGuiApplicationTests.txt
â””â”€â”€ [  96]  test-classes
    â””â”€â”€ [  96]  deep
        â””â”€â”€ [  96]  in
            â””â”€â”€ [  96]  spring
                â””â”€â”€ [  96]  boot
                    â””â”€â”€ [ 588]  FirstApplicationByGuiApplicationTests.class

22 directories, 12 files
</code></pre></div></p>
<p><code>first-application-by-gui-0.0.1-SNAPSHOT.jar.original</code>æ˜¯æœªåŒ…å«ç¬¬ä¸‰æ–¹ä¾èµ–çš„æœ¬åœ°èµ„æº(ç¼–è¯‘åçš„<code>classes</code>ç›®å½•ä¸‹çš„èµ„æº)ï¼Œæ‰€å ç©ºé—´ä»…3Kï¼Œè€Œå¯æ‰§è¡ŒJARçš„å¤§å°ä¸º16Mã€‚</p>
<p>è§£å‹ç¼©<code>first-application-by-gui-0.0.1-SNAPSHOT.jar</code>åˆ°ä¸´æ—¶ç›®å½•tempå¹¶æŸ¥çœ‹ï¼š
<div class="highlight"><pre><span></span><code>$ unzip first-application-by-gui-0.0.1-SNAPSHOT.jar -d temp
Archive:  first-application-by-gui-0.0.1-SNAPSHOT.jar
   creating: temp/META-INF/
  inflating: temp/META-INF/MANIFEST.MF  
   creating: temp/org/
   creating: temp/org/springframework/
   creating: temp/org/springframework/boot/
   creating: temp/org/springframework/boot/loader/
(çœç•¥éƒ¨åˆ†å†…å®¹)
 extracting: temp/BOOT-INF/lib/tomcat-embed-websocket-9.0.37.jar  
 extracting: temp/BOOT-INF/lib/spring-web-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/spring-beans-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/spring-webmvc-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/spring-aop-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/spring-context-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/spring-expression-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/slf4j-api-1.7.30.jar  
 extracting: temp/BOOT-INF/lib/spring-core-5.2.8.RELEASE.jar  
 extracting: temp/BOOT-INF/lib/spring-jcl-5.2.8.RELEASE.jar  
  inflating: temp/BOOT-INF/classpath.idx 
</code></pre></div></p>
<p>æŸ¥çœ‹tempç›®å½•çš„ç»“æ„ï¼š
<div class="highlight"><pre><span></span><code>$ tree temp/
temp/
â”œâ”€â”€ BOOT-INF
â”‚Â Â  â”œâ”€â”€ classes
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ application.properties
â”‚Â Â  â”‚Â Â  â””â”€â”€ deep
â”‚Â Â  â”‚Â Â      â””â”€â”€ in
â”‚Â Â  â”‚Â Â          â””â”€â”€ spring
â”‚Â Â  â”‚Â Â              â””â”€â”€ boot
â”‚Â Â  â”‚Â Â                  â””â”€â”€ FirstApplicationByGuiApplication.class
â”‚Â Â  â”œâ”€â”€ classpath.idx
â”‚Â Â  â””â”€â”€ lib
â”‚Â Â      â”œâ”€â”€ ...
â”‚Â Â      â”œâ”€â”€ spring-aop-5.2.8.RELEASE.jar
â”‚Â Â      â”œâ”€â”€ spring-beans-5.2.8.RELEASE.jar
â”‚Â Â      â”œâ”€â”€ spring-boot-2.3.2.RELEASE.jar
â”‚Â Â      â”œâ”€â”€ spring-boot-autoconfigure-2.3.2.RELEASE.jar
â”‚Â Â      â”œâ”€â”€ ...
â”‚Â Â      â”œâ”€â”€ tomcat-embed-core-9.0.37.jar
â”‚Â Â      â””â”€â”€ tomcat-embed-websocket-9.0.37.jar
â”œâ”€â”€ META-INF
â”‚Â Â  â”œâ”€â”€ MANIFEST.MF
â”‚Â Â  â””â”€â”€ maven
â”‚Â Â      â””â”€â”€ deep-in-spring-boot
â”‚Â Â          â””â”€â”€ first-application-by-gui
â”‚Â Â              â”œâ”€â”€ pom.properties
â”‚Â Â              â””â”€â”€ pom.xml
â””â”€â”€ org
    â””â”€â”€ springframework
        â””â”€â”€ boot
            â””â”€â”€ loader
                â”œâ”€â”€ ClassPathIndexFile.class
                â”œâ”€â”€ ExecutableArchiveLauncher.class
                â”œâ”€â”€ JarLauncher.class
                â”œâ”€â”€ ...

20 directories, 100 files
</code></pre></div></p>
<p>å…¶ä¸­</p>
<ul>
<li><code>BOOT-INT/classes</code> ç›®å½•å­˜æ”¾åº”ç”¨ç¼–è¯‘åçš„classæ–‡ä»¶</li>
<li><code>BOOT-INF/lib</code> ç›®å½•å­˜æ”¾åº”ç”¨ä¾èµ–çš„jaråŒ…</li>
<li><code>META-INF</code> ç›®å½•å­˜æ”¾åº”ç”¨ç›¸å…³çš„å…ƒä¿¡æ¯ï¼Œæ¯”å¦‚<code>MANIFEST.MF</code>æ–‡ä»¶</li>
<li><code>org</code> ç›®å½•å­˜æ”¾Spring Bootæ¡†æ¶ç›¸å…³çš„classæ–‡ä»¶</li>
</ul>
<p>è§£å‹ç¼©<code>first-application-by-gui-0.0.1-SNAPSHOT.jar.original</code>æ–‡ä»¶å¹¶æ¯”è¾ƒäºŒè€…ç›®å½•å·®å¼‚ï¼š
<div class="highlight"><pre><span></span><code>$ unzip first-application-by-gui-0.0.1-SNAPSHOT.jar.original -d original
Archive:  first-application-by-gui-0.0.1-SNAPSHOT.jar.original
  inflating: original/META-INF/MANIFEST.MF  
   creating: original/deep/
   creating: original/deep/in/
   creating: original/deep/in/spring/
   creating: original/deep/in/spring/boot/
   creating: original/META-INF/maven/
   creating: original/META-INF/maven/deep-in-spring-boot/
   creating: original/META-INF/maven/deep-in-spring-boot/first-application-by-gui/
  inflating: original/deep/in/spring/boot/FirstApplicationByGuiApplication.class  
  inflating: original/application.properties  
  inflating: original/META-INF/maven/deep-in-spring-boot/first-application-by-gui/pom.xml  
  inflating: original/META-INF/maven/deep-in-spring-boot/first-application-by-gui/pom.properties  
$ tree original/
original/
â”œâ”€â”€ META-INF
â”‚Â Â  â”œâ”€â”€ MANIFEST.MF
â”‚Â Â  â””â”€â”€ maven
â”‚Â Â      â””â”€â”€ deep-in-spring-boot
â”‚Â Â          â””â”€â”€ first-application-by-gui
â”‚Â Â              â”œâ”€â”€ pom.properties
â”‚Â Â              â””â”€â”€ pom.xml
â”œâ”€â”€ application.properties
â””â”€â”€ deep
    â””â”€â”€ in
        â””â”€â”€ spring
            â””â”€â”€ boot
                â””â”€â”€ FirstApplicationByGuiApplication.class

8 directories, 5 files
</code></pre></div></p>
<p>é™¤äº†<code>META-INF</code>ç›®å½•ï¼Œå…¶ä½™å‡å‘ç”Ÿäº†å˜åŒ–ï¼Œå°†classæ–‡ä»¶å’Œ<code>application.properties</code>æ”¾åˆ°äº†<code>BOOT-INF/classes</code>ä¸‹ï¼Œå°†æ‰€æœ‰ä¾èµ–çš„jaråŒ…éƒ½æ”¾åˆ°äº†<code>BOOT-INF/lib</code>ä¸‹ã€‚è¿™å’Œä¼ ç»ŸJava Webé¡¹ç›®æ˜¯ç±»ä¼¼çš„ï¼Œæ‰€æœ‰classæ–‡ä»¶æ”¾åœ¨<code>WEB-INF/classes</code>ä¸‹ï¼Œè€Œæ‰€æœ‰ä¾èµ–åœ¨<code>WEB-INF/lib</code>ä¸‹ã€‚</p>
<h4 id="5-jarspring-boot-loader">5. JARæ‰§è¡Œæ¨¡å—<code>spring-boot-loader</code><a class="headerlink" href="#5-jarspring-boot-loader" title="Permanent link">&para;</a></h4>
<p>å¯æ‰§è¡ŒJARåŒ…è¢«<code>java -jar</code>å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œå…¶å¹¶ä¸èƒ½æ„ŸçŸ¥jaræ–‡ä»¶æ˜¯å¦æ˜¯Spring Bootæ’ä»¶æ‰“åŒ…è€Œæ¥ï¼Œæ‰§è¡ŒæŒ‰ç…§æ ‡å‡†JARæ–‡ä»¶æ¥è¿›è¡Œã€‚</p>
<p>Javaæ ‡å‡†å‚è€ƒï¼š<br />
<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html</a></p>
<blockquote>
<p>If the -jar option is specified, its argument is the name of the JAR file containing class and resource files for the application. The startup class must be indicated by the Main-Class manifest header in its source code.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯<code>MANIFEST.MF</code>æ–‡ä»¶å¿…é¡»åœ¨<code>META-INF</code>ç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶:
<div class="highlight"><pre><span></span><code>$ cd temp
$ cat META-INF/MANIFEST.MF 
Manifest-Version: 1.0
Spring-Boot-Classpath-Index: BOOT-INF/classpath.idx
Implementation-Title: first-application-by-gui
Implementation-Version: 0.0.1-SNAPSHOT
Start-Class: deep.in.spring.boot.FirstApplicationByGuiApplication
Spring-Boot-Classes: BOOT-INF/classes/
Spring-Boot-Lib: BOOT-INF/lib/
Build-Jdk-Spec: 1.8
Spring-Boot-Version: 2.3.2.RELEASE
Created-By: Maven Jar Plugin 3.2.0
Main-Class: org.springframework.boot.loader.JarLauncher
</code></pre></div></p>
<p>å‘ç°<code>Main-Class</code>å±æ€§ä¸º<code>org.springframework.boot.loader.JarLauncher</code>ï¼Œè€Œé¡¹ç›®çš„å¼•å¯¼ç±»åœ¨<code>Start-Class</code>å±æ€§ä¸­ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ä»‹ç»ï¼š</p>
<blockquote>
<p>You need to specify an appropriate Launcher as the Main-Class attribute of META-INF/MANIFEST.MF. The actual class that you want to launch (that is, the class that contains a main method) should be specified in the Start-Class attribute.<br />
The following example shows a typical MANIFEST.MF for an executable jar file:
<div class="highlight"><pre><span></span><code>Main-Class: org.springframework.boot.loader.JarLauncher
Start-Class: com.mycompany.project.MyApplication
</code></pre></div>
For a war file, it would be as follows:
<div class="highlight"><pre><span></span><code>Main-Class: org.springframework.boot.loader.WarLauncher
Start-Class: com.mycompany.project.MyApplication
</code></pre></div>
å¯ä»¥çœ‹åˆ°ï¼ŒJARå’ŒWARå¯¹åº”äº†ä¸åŒçš„<code>Launcher</code>å®ç°.</p>
</blockquote>
<p>å› ä¸º<code>org.springframework.boot.loader.JarLauncher</code>å¹¶éé¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒæ˜¯ç”±<code>spring-boot-maven-plugin</code>æ’ä»¶åœ¨æ‰“åŒ…æ—¶å¼•å…¥çš„ï¼Œä¸ºäº†ç ”ç©¶ï¼Œå…ˆå»æŸ¥æ‰¾å®ƒçš„æ‰€å±ï¼Œåœ¨ <a href="https://search.maven.org/">https://search.maven.org/</a> ä¸­ï¼Œå¯ä»¥ç›´æ¥æŒ‰ç±»å…¨åæœç´¢ï¼Œæ‰¾åˆ°GAVä¿¡æ¯</p>
<p><img alt="search.maven.org" src="../img/search.maven.org.png" /></p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>spring-boot-loader<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.3.2.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>æ—¢ç„¶<code>org.springframework.boot.loader.JarLauncher</code>æ˜¯<code>MANIFEAST.MF</code>å®šä¹‰çš„ä¸»å¼•å¯¼ç±»ï¼Œé‚£ä¹ˆç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶ä¹Ÿèƒ½å¯åŠ¨é¡¹ç›®ï¼š
<div class="highlight"><pre><span></span><code>$ java org.springframework.boot.loader.JarLauncher

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.2.RELEASE)

2020-08-02 19:53:47.440  INFO 4807 --- [           main] d.i.s.b.FirstApplicationByGuiApplication : Starting FirstApplicationByGuiApplication v0.0.1-SNAPSHOT on nanleis-MacBook-Pro.local with PID 4807 (/Users/nanlei/Dev/Workspace/first-application-by-gui/target/temp/BOOT-INF/classes started by nanlei in /Users/nanlei/Dev/Workspace/first-application-by-gui/target/temp)
2020-08-02 19:53:47.442  INFO 4807 --- [           main] d.i.s.b.FirstApplicationByGuiApplication : No active profile set, falling back to default profiles: default
2020-08-02 19:53:48.060  INFO 4807 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2020-08-02 19:53:48.069  INFO 4807 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-08-02 19:53:48.069  INFO 4807 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.37]
2020-08-02 19:53:48.122  INFO 4807 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-08-02 19:53:48.123  INFO 4807 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 645 ms
2020-08-02 19:53:48.286  INFO 4807 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-02 19:53:48.439  INFO 4807 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;
2020-08-02 19:53:48.448  INFO 4807 --- [           main] d.i.s.b.FirstApplicationByGuiApplication : Started FirstApplicationByGuiApplication in 1.288 seconds (JVM running for 1.585)
</code></pre></div></p>
<p>ä»è¾“å‡ºä¸­ä¹Ÿèƒ½çœ‹åˆ°<code>deep.in.spring.boot.FirstApplicationByGuiApplication</code>è¢«<code>JarLauncher</code>è£…è½½å¹¶æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯<code>META-INF/MANIFEST.MF</code>ä¸­çš„<code>Start-Class</code>è¢«<code>JarLauncher</code>æ‰§è¡Œã€‚è‹¥ç›´æ¥ä½¿ç”¨javaå‘½ä»¤æ‰§è¡Œ<code>deep.in.spring.boot.FirstApplicationByGuiApplication</code>ï¼š</p>
<div class="highlight"><pre><span></span><code>$ cd BOOT-INF/classes
$ java deep.in.spring.boot.FirstApplicationByGuiApplication
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication
    at deep.in.spring.boot.FirstApplicationByGuiApplication.main(FirstApplicationByGuiApplication.java:10)
Caused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication
    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
    ... 1 more
</code></pre></div>

<p>æç¤ºæ‰¾ä¸åˆ°ç±»<code>org.springframework.boot.SpringApplication</code>ï¼Œè¿™æ˜¯ç”±äºjavaå‘½ä»¤æ²¡æœ‰æŒ‡å®š<code>classpath</code>ï¼ŒåŠ ä¸Š<code>classpath</code>å‚æ•°ä¹‹åï¼Œä¹Ÿèƒ½å¯åŠ¨ç¨‹åºï¼š
<div class="highlight"><pre><span></span><code>$ java -classpath &quot;.:../lib/*&quot; deep.in.spring.boot.FirstApplicationByGuiApplication
</code></pre></div></p>
<h4 id="6-jarlauncher">6. JarLauncherçš„å®ç°åŸç†<a class="headerlink" href="#6-jarlauncher" title="Permanent link">&para;</a></h4>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œç”¨äºæºç åˆ†æï¼š
<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- spring-boot-loader åˆ†æ --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-loader<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></p>
<blockquote>
<p>ä»¥ä¸‹åˆ†æå‡åŸºäºorg.springframework.boot:spring-boot-loader:2.3.1.RELEASE</p>
</blockquote>
<p>å› ä¸ºè¿è¡Œæ—¶<code>spring-boot-loader</code>åœ¨JARæ–‡ä»¶ä¸­å­˜åœ¨ï¼Œæ‰€ä»¥è¿™é‡Œ<code>scope</code>å®šä¸º<code>provided</code>ã€‚</p>
<p>åœ¨IDEAä¸­å¯¹<code>spring-boot-loader</code>å¼€å¯æ–­ç‚¹è°ƒè¯•ï¼š
+ å°†é¡¹ç›®æ‰“åŒ…
+ åœ¨IDEAçš„<code>Run/Debug Configuration</code>ä¸­æ–°å»º<code>JAR Application</code>
+ å¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾
<img alt="debug.springboot.loader" src="../img/debug.springboot.loader.png" /></p>
<p>åœ¨IDEAä¸­æŒ‰<code>command+O</code>æŸ¥æ‰¾<code>org.springframework.boot.loader.JarLauncher</code>ï¼Œå³å¯ä»<code>main()</code>æ–¹æ³•å¼€å§‹è·Ÿè¸ªè°ƒè¯•ã€‚</p>
<p><code>JarLauncher</code>ç»§æ‰¿è‡ª<code>org.springframework.boot.loader.Launcher</code>ï¼Œå…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img alt="" src="../img/puml-spring-boot-loader-launcher.png" /></p>
<p><code>JarLauncher</code>çš„<code>main()</code>æ–¹æ³•ä¸ºï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="k">new</span> <span class="n">JarLauncher</span><span class="p">().</span><span class="na">launch</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></p>
<p><code>Launcher#launch(args)</code>å®ç°ä¸ºï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">launch</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">isExploded</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">JarFile</span><span class="p">.</span><span class="na">registerUrlProtocolHandler</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">ClassLoader</span> <span class="n">classLoader</span> <span class="o">=</span> <span class="n">createClassLoader</span><span class="p">(</span><span class="n">getClassPathArchivesIterator</span><span class="p">());</span>
        <span class="n">String</span> <span class="n">jarMode</span> <span class="o">=</span> <span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="s">&quot;jarmode&quot;</span><span class="p">);</span>
        <span class="n">String</span> <span class="n">launchClass</span> <span class="o">=</span> <span class="p">(</span><span class="n">jarMode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">jarMode</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span> <span class="o">?</span> <span class="n">JAR_MODE_LAUNCHER</span> <span class="p">:</span> <span class="n">getMainClass</span><span class="p">();</span>
        <span class="n">launch</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">launchClass</span><span class="p">,</span> <span class="n">classLoader</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>å…¶ä¸­<code>JarFile.registerUrlProtocolHandler()</code>æ–¹æ³•ä¸ºï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PROTOCOL_HANDLER</span> <span class="o">=</span> <span class="s">&quot;java.protocol.handler.pkgs&quot;</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">HANDLERS_PACKAGE</span> <span class="o">=</span> <span class="s">&quot;org.springframework.boot.loader&quot;</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Register a {@literal &#39;java.protocol.handler.pkgs&#39;} property so that a</span>
<span class="cm">     * {@link URLStreamHandler} will be located to deal with jar URLs.</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">registerUrlProtocolHandler</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">handlers</span> <span class="o">=</span> <span class="n">System</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="n">PROTOCOL_HANDLER</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="n">PROTOCOL_HANDLER</span><span class="p">,</span>
                <span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">handlers</span><span class="p">)</span> <span class="o">?</span> <span class="n">HANDLERS_PACKAGE</span> <span class="p">:</span> <span class="n">handlers</span> <span class="o">+</span> <span class="s">&quot;|&quot;</span> <span class="o">+</span> <span class="n">HANDLERS_PACKAGE</span><span class="p">));</span>
        <span class="n">resetCachedUrlHandlers</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Reset any cached handlers just in case a jar protocol has already been used. We</span>
<span class="cm">     * reset the handler by trying to set a null {@link URLStreamHandlerFactory} which</span>
<span class="cm">     * should have no effect other than clearing the handlers cache.</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">resetCachedUrlHandlers</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">URL</span><span class="p">.</span><span class="na">setURLStreamHandlerFactory</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">catch</span> <span class="p">(</span><span class="n">Error</span> <span class="n">ex</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Ignore</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>è¯¥æ–¹æ³•å°†<code>org.springframework.boot.loader</code>è¿½åŠ åˆ°Javaç³»ç»Ÿå±æ€§<code>java.protocol.handler.pkgs</code>ä¸­ï¼Œä¹Ÿå°±æ˜¯<code>org.springframework.boot.loader</code>åŒ…ä¸‹å­˜åœ¨ä¸€ä¸ª<code>Handler</code>ç±»ï¼Œå³<code>org.springframework.boot.loader.jar.Handler</code>ï¼Œå®ƒæ‰©å±•äº†<code>URLStreamHandler</code>ï¼Œè¿™æ˜¯<code>java.net.URLStreamHandler</code>çš„æ‰©å±•æœºåˆ¶å®ç°çš„ï¼Œç”±<code>URL#getURLStreamHandler(String protocol)</code>æ–¹æ³•æä¾›ï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">protocolPathProp</span> <span class="o">=</span> <span class="s">&quot;java.protocol.handler.pkgs&quot;</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * A table of protocol handlers.</span>
<span class="cm">     */</span>
    <span class="kd">static</span> <span class="n">Hashtable</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">URLStreamHandler</span><span class="o">&gt;</span> <span class="n">handlers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Hashtable</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Object</span> <span class="n">streamHandlerLock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="p">();</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns the Stream Handler.</span>
<span class="cm">     * @param protocol the protocol to use</span>
<span class="cm">     */</span>
    <span class="kd">static</span> <span class="n">URLStreamHandler</span> <span class="nf">getURLStreamHandler</span><span class="p">(</span><span class="n">String</span> <span class="n">protocol</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">URLStreamHandler</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">handlers</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">handler</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>

            <span class="kt">boolean</span> <span class="n">checkedWithFactory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

            <span class="c1">// Use the factory (if any)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">factory</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">handler</span> <span class="o">=</span> <span class="n">factory</span><span class="p">.</span><span class="na">createURLStreamHandler</span><span class="p">(</span><span class="n">protocol</span><span class="p">);</span>
                <span class="n">checkedWithFactory</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Try java protocol handler</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">handler</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">String</span> <span class="n">packagePrefixList</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

                <span class="n">packagePrefixList</span>
                    <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="na">security</span><span class="p">.</span><span class="na">AccessController</span><span class="p">.</span><span class="na">doPrivileged</span><span class="p">(</span>
                    <span class="k">new</span> <span class="n">sun</span><span class="p">.</span><span class="na">security</span><span class="p">.</span><span class="na">action</span><span class="p">.</span><span class="na">GetPropertyAction</span><span class="p">(</span>
                        <span class="n">protocolPathProp</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">));</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">packagePrefixList</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">packagePrefixList</span> <span class="o">+=</span> <span class="s">&quot;|&quot;</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="c1">// REMIND: decide whether to allow the &quot;null&quot; class prefix</span>
                <span class="c1">// or not.</span>
                <span class="n">packagePrefixList</span> <span class="o">+=</span> <span class="s">&quot;sun.net.www.protocol&quot;</span><span class="p">;</span>

                <span class="n">StringTokenizer</span> <span class="n">packagePrefixIter</span> <span class="o">=</span>
                    <span class="k">new</span> <span class="n">StringTokenizer</span><span class="p">(</span><span class="n">packagePrefixList</span><span class="p">,</span> <span class="s">&quot;|&quot;</span><span class="p">);</span>

                <span class="k">while</span> <span class="p">(</span><span class="n">handler</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
                       <span class="n">packagePrefixIter</span><span class="p">.</span><span class="na">hasMoreTokens</span><span class="p">())</span> <span class="p">{</span>

                    <span class="n">String</span> <span class="n">packagePrefix</span> <span class="o">=</span>
                      <span class="n">packagePrefixIter</span><span class="p">.</span><span class="na">nextToken</span><span class="p">().</span><span class="na">trim</span><span class="p">();</span>
                    <span class="k">try</span> <span class="p">{</span>
                        <span class="n">String</span> <span class="n">clsName</span> <span class="o">=</span> <span class="n">packagePrefix</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span> <span class="o">+</span> <span class="n">protocol</span> <span class="o">+</span>
                          <span class="s">&quot;.Handler&quot;</span><span class="p">;</span>
                        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">cls</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                        <span class="k">try</span> <span class="p">{</span>
                            <span class="n">cls</span> <span class="o">=</span> <span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="n">clsName</span><span class="p">);</span>
                        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">ClassLoader</span> <span class="n">cl</span> <span class="o">=</span> <span class="n">ClassLoader</span><span class="p">.</span><span class="na">getSystemClassLoader</span><span class="p">();</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">cl</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                                <span class="n">cls</span> <span class="o">=</span> <span class="n">cl</span><span class="p">.</span><span class="na">loadClass</span><span class="p">(</span><span class="n">clsName</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">cls</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">handler</span>  <span class="o">=</span>
                              <span class="p">(</span><span class="n">URLStreamHandler</span><span class="p">)</span><span class="n">cls</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// any number of exceptions can get thrown here</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">synchronized</span> <span class="p">(</span><span class="n">streamHandlerLock</span><span class="p">)</span> <span class="p">{</span>

                <span class="n">URLStreamHandler</span> <span class="n">handler2</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

                <span class="c1">// Check again with hashtable just in case another</span>
                <span class="c1">// thread created a handler since we last checked</span>
                <span class="n">handler2</span> <span class="o">=</span> <span class="n">handlers</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">handler2</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="n">handler2</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="c1">// Check with factory if another thread set a</span>
                <span class="c1">// factory since our last check</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">checkedWithFactory</span> <span class="o">&amp;&amp;</span> <span class="n">factory</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">handler2</span> <span class="o">=</span> <span class="n">factory</span><span class="p">.</span><span class="na">createURLStreamHandler</span><span class="p">(</span><span class="n">protocol</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">handler2</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// The handler from the factory must be given more</span>
                    <span class="c1">// importance. Discard the default handler that</span>
                    <span class="c1">// this thread created.</span>
                    <span class="n">handler</span> <span class="o">=</span> <span class="n">handler2</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="c1">// Insert this handler into the hashtable</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">handler</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">handlers</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="n">handler</span><span class="p">);</span>
                <span class="p">}</span>

            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">handler</span><span class="p">;</span>

    <span class="p">}</span>
</code></pre></div></p>
<p>å…¶ä¸­JDKå†…å»ºåè®®æ”¾åœ¨<code>sun.net.www.protocol</code>åŒ…ä¸‹ï¼Œç±»å…¨åæ¨¡å¼ä¸º<code>sun.net.www.protocol.${protocol}.Handler</code>ï¼Œ<code>${protocol}</code>ä¸ºåè®®åï¼Œå¸¸è§åè®®æœ‰ï¼š</p>
<ul>
<li>FILE : <code>sun.net.www.protocol.file.Handler</code></li>
<li>JAR : <code>sun.net.www.prorocol.jar.Handler</code></li>
<li>HTTP : <code>sun.net.www.prorocol.http.Handler</code></li>
<li>HTTPS : <code>sun.net.www.prorocol.https.Handler</code></li>
<li>FTP : <code>sun.net.www.prorocol.ftp.Handler</code></li>
</ul>
<p>å›åˆ°<code>org.springframework.boot.loader.jar.Handler</code>ä¸­ï¼ŒæŒ‰ç…§ç±»åæ¨¡å¼ï¼Œå®ç°åè®®ä¸ºJARï¼Œè¦†ç›–äº†JDKçš„å†…å»ºå®ç°ï¼Œå› ä¸ºSpring Bootçš„FAT JARåŒ…å«äº†ä¼ ç»Ÿçš„java JARèµ„æºï¼Œè¿˜åŒ…å«äº†ä¾èµ–çš„JARæ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨å½’æ¡£æ–‡ä»¶ï¼Œå½“ä½¿ç”¨<code>java -jar</code>å‘½ä»¤æ¥å¼•å¯¼æ—¶ï¼Œå†…éƒ¨çš„JARæ–‡ä»¶æ— æ³•è¢«å†…å»ºçš„<code>sun.net.www.prorocol.jar.Handler</code>å½“ä½œ<code>classpath</code>ï¼Œæ‰€ä»¥éœ€è¦æ›¿æ¢å®ç°ã€‚</p>
<blockquote>
<p>å…·ä½“å¯ä»¥å‚è€ƒ<code>org.springframework.boot.loader.jar.JarURLConnection#get(URL url, JarFile jarFile)</code>æ–¹æ³•å’Œ<code>org.springframework.boot.loader.jar.JarFile</code>ç±»ã€‚</p>
</blockquote>
<p><code>Launcher#launch(args)</code>æ–¹æ³•çš„ç¬¬äºŒæ­¥ä¸º<code>createClassLoader(getClassPathArchivesIterator())</code>ï¼Œå…¶ä¸­<code>getClassPathArchivesIterator()</code>æ–¹æ³•ç”±<code>ExecutableArchiveLauncher</code>æä¾›ï¼š
<div class="highlight"><pre><span></span><code>    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Archive</span><span class="o">&gt;</span> <span class="nf">getClassPathArchivesIterator</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="n">Archive</span><span class="p">.</span><span class="na">EntryFilter</span> <span class="n">searchFilter</span> <span class="o">=</span> <span class="k">this</span><span class="p">::</span><span class="n">isSearchCandidate</span><span class="p">;</span>
        <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Archive</span><span class="o">&gt;</span> <span class="n">archives</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">archive</span><span class="p">.</span><span class="na">getNestedArchives</span><span class="p">(</span><span class="n">searchFilter</span><span class="p">,</span>
                <span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">isNestedArchive</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">isEntryIndexed</span><span class="p">(</span><span class="n">entry</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isPostProcessingClassPathArchives</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">archives</span> <span class="o">=</span> <span class="n">applyClassPathArchivePostProcessing</span><span class="p">(</span><span class="n">archives</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">archives</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>è€Œ<code>isNestedArchive(Archive.Entry entry)</code>æ–¹æ³•åˆ™ç”±å­ç±»<code>JarLauncher</code>æˆ–<code>WarLauncher</code>æä¾›ï¼Œåœ¨<code>JarLauncher</code>ä¸­ï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">static</span> <span class="kd">final</span> <span class="n">EntryFilter</span> <span class="n">NESTED_ARCHIVE_ENTRY_FILTER</span> <span class="o">=</span> <span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">isDirectory</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">entry</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;BOOT-INF/classes/&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">entry</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;BOOT-INF/lib/&quot;</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">isNestedArchive</span><span class="p">(</span><span class="n">Archive</span><span class="p">.</span><span class="na">Entry</span> <span class="n">entry</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">NESTED_ARCHIVE_ENTRY_FILTER</span><span class="p">.</span><span class="na">matches</span><span class="p">(</span><span class="n">entry</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>ä¹Ÿå°±æ˜¯è¿‡æ»¤<code>Archive.Entry</code>æ‰€åŒ¹é…çš„åç§°æ˜¯<code>BOOT-INF/classes/</code>è¿˜æ˜¯<code>BOOT-INF/lib/</code>å‰ç¼€ï¼Œè€Œ<code>getClassPathArchivesIterator()</code>æ–¹æ³•è¿”å›ç»“æœè¿˜æ˜¯å–å†³äº<code>archive</code>å±æ€§çš„å†…å®¹ï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">public</span> <span class="nf">ExecutableArchiveLauncher</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="na">archive</span> <span class="o">=</span> <span class="n">createArchive</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="na">classPathIndex</span> <span class="o">=</span> <span class="n">getClassPathIndex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">archive</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="n">ex</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>æ­¤å¤„<code>archive</code>æºäºçˆ¶ç±»<code>Launcher</code>çš„<code>createArchive()</code>æ–¹æ³•ï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">protected</span> <span class="kd">final</span> <span class="n">Archive</span> <span class="nf">createArchive</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="n">ProtectionDomain</span> <span class="n">protectionDomain</span> <span class="o">=</span> <span class="n">getClass</span><span class="p">().</span><span class="na">getProtectionDomain</span><span class="p">();</span>
        <span class="n">CodeSource</span> <span class="n">codeSource</span> <span class="o">=</span> <span class="n">protectionDomain</span><span class="p">.</span><span class="na">getCodeSource</span><span class="p">();</span>
        <span class="n">URI</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">codeSource</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="n">codeSource</span><span class="p">.</span><span class="na">getLocation</span><span class="p">().</span><span class="na">toURI</span><span class="p">()</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="p">(</span><span class="n">location</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="n">location</span><span class="p">.</span><span class="na">getSchemeSpecificPart</span><span class="p">()</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">path</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Unable to determine code source archive&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">File</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">root</span><span class="p">.</span><span class="na">exists</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;Unable to determine code source archive from &quot;</span> <span class="o">+</span> <span class="n">root</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="na">isDirectory</span><span class="p">()</span> <span class="o">?</span> <span class="k">new</span> <span class="n">ExplodedArchive</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="p">:</span> <span class="k">new</span> <span class="n">JarFileArchive</span><span class="p">(</span><span class="n">root</span><span class="p">));</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>è¿™é‡Œä¸»è¦é€šè¿‡<code>Launcher</code>æ‰€åœ¨çš„åª’ä»‹ï¼Œåˆ¤æ–­æ˜¯<code>JarFileArchive</code>è¿˜æ˜¯<code>ExplodedArchive</code>(è§£å‹ç›®å½•)ï¼Œå› ä¸ºè¯¥æ–¹æ³•æ˜¯<code>final</code>ç±»å‹ï¼Œæ‰€ä»¥å­ç±»<code>JarLauncher</code>æˆ–<code>WarLauncher</code>å‡ç»§æ‰¿è¯¥å®ç°ã€‚</p>
<p>å†å¾€åå°±æ˜¯æ ¹æ®è·å–åˆ°çš„archiveså»åˆ›å»º<code>ClassLoader</code>ï¼Œåœ¨<code>ExecutableArchiveLauncher</code>ä¸­ï¼š
<div class="highlight"><pre><span></span><code>    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">ClassLoader</span> <span class="nf">createClassLoader</span><span class="p">(</span><span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Archive</span><span class="o">&gt;</span> <span class="n">archives</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">URL</span><span class="o">&gt;</span> <span class="n">urls</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">guessClassPathSize</span><span class="p">());</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">archives</span><span class="p">.</span><span class="na">hasNext</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">urls</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">archives</span><span class="p">.</span><span class="na">next</span><span class="p">().</span><span class="na">getUrl</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">classPathIndex</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">urls</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">classPathIndex</span><span class="p">.</span><span class="na">getUrls</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">createClassLoader</span><span class="p">(</span><span class="n">urls</span><span class="p">.</span><span class="na">toArray</span><span class="p">(</span><span class="k">new</span> <span class="n">URL</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">));</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>æœ€åè°ƒç”¨<code>Launcher</code>ä¸­çš„<code>createClassLoader(URL[] urls)</code>æ–¹æ³•åˆ›å»º<code>ClassLoader</code>ï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">protected</span> <span class="n">ClassLoader</span> <span class="nf">createClassLoader</span><span class="p">(</span><span class="n">URL</span><span class="o">[]</span> <span class="n">urls</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">LaunchedURLClassLoader</span><span class="p">(</span><span class="n">isExploded</span><span class="p">(),</span> <span class="n">getArchive</span><span class="p">(),</span> <span class="n">urls</span><span class="p">,</span> <span class="n">getClass</span><span class="p">().</span><span class="na">getClassLoader</span><span class="p">());</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>ä¹‹åç¡®å®š<code>launchClass</code>çš„å†…å®¹ï¼Œå°±æ˜¯ä»<code>MANIFEST.MF</code>ä¸­è·å–<code>Start-Class</code>çš„å†…å®¹ï¼Œåœ¨<code>ExecutableArchiveLauncher</code>ä¸­ï¼š
<div class="highlight"><pre><span></span><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">START_CLASS_ATTRIBUTE</span> <span class="o">=</span> <span class="s">&quot;Start-Class&quot;</span><span class="p">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">String</span> <span class="nf">getMainClass</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="n">Manifest</span> <span class="n">manifest</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">archive</span><span class="p">.</span><span class="na">getManifest</span><span class="p">();</span>
        <span class="n">String</span> <span class="n">mainClass</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">manifest</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">mainClass</span> <span class="o">=</span> <span class="n">manifest</span><span class="p">.</span><span class="na">getMainAttributes</span><span class="p">().</span><span class="na">getValue</span><span class="p">(</span><span class="n">START_CLASS_ATTRIBUTE</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">mainClass</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;No &#39;Start-Class&#39; manifest entry specified in &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">mainClass</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>ç´§æ¥ç€è°ƒç”¨å®é™…çš„å¼•å¯¼ç±»<code>launch(String[] args, String launchClass, ClassLoader classLoader)</code>
<div class="highlight"><pre><span></span><code>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">launch</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">String</span> <span class="n">launchClass</span><span class="p">,</span> <span class="n">ClassLoader</span> <span class="n">classLoader</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">setContextClassLoader</span><span class="p">(</span><span class="n">classLoader</span><span class="p">);</span>
        <span class="n">createMainMethodRunner</span><span class="p">(</span><span class="n">launchClass</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">classLoader</span><span class="p">).</span><span class="na">run</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">protected</span> <span class="n">MainMethodRunner</span> <span class="nf">createMainMethodRunner</span><span class="p">(</span><span class="n">String</span> <span class="n">mainClass</span><span class="p">,</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">ClassLoader</span> <span class="n">classLoader</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">MainMethodRunner</span><span class="p">(</span><span class="n">mainClass</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>å®é™…æ‰§è¡Œçš„æ–¹æ³•ä¸º<code>MainMethodRunner#run()</code>ï¼š
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainMethodRunner</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">mainClassName</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">MainMethodRunner</span><span class="p">(</span><span class="n">String</span> <span class="n">mainClass</span><span class="p">,</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">mainClassName</span> <span class="o">=</span> <span class="n">mainClass</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="na">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">args</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="o">?</span> <span class="n">args</span><span class="p">.</span><span class="na">clone</span><span class="p">()</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">mainClass</span> <span class="o">=</span> <span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">mainClassName</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getContextClassLoader</span><span class="p">());</span>
        <span class="n">Method</span> <span class="n">mainMethod</span> <span class="o">=</span> <span class="n">mainClass</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&quot;main&quot;</span><span class="p">,</span> <span class="n">String</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
        <span class="n">mainMethod</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="n">mainMethod</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="na">args</span> <span class="p">});</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></p>
<p>æœ€åå°†<code>mainClass</code>ä¸­çš„<code>main(String[])</code>æ–¹æ³•æŒ‰é™æ€æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç»ˆ<code>JarLauncher</code>æ˜¯åœ¨åŒè¿›ç¨‹å†…è°ƒç”¨<code>Start-Class</code>çš„<code>main(String[])</code>æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¿™ä¹‹å‰å‡†å¤‡å¥½Class Pathã€‚</p>
<h4 id="7-warlauncher">7. WarLauncherçš„å·®å¼‚<a class="headerlink" href="#7-warlauncher" title="Permanent link">&para;</a></h4>
<p>å’Œ<code>JarLauncher</code>å·®å¼‚ä¸å¤§ï¼ŒäºŒè€…éƒ½æ˜¯ç»§æ‰¿è‡ª<code>ExecutableArchiveLauncher</code>ï¼š
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WarLauncher</span> <span class="kd">extends</span> <span class="n">ExecutableArchiveLauncher</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="nf">WarLauncher</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="kd">protected</span> <span class="nf">WarLauncher</span><span class="p">(</span><span class="n">Archive</span> <span class="n">archive</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">archive</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">isPostProcessingClassPathArchives</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">isSearchCandidate</span><span class="p">(</span><span class="n">Entry</span> <span class="n">entry</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">entry</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;WEB-INF/&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isNestedArchive</span><span class="p">(</span><span class="n">Archive</span><span class="p">.</span><span class="na">Entry</span> <span class="n">entry</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="na">isDirectory</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">entry</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;WEB-INF/classes/&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">entry</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;WEB-INF/lib/&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">entry</span><span class="p">.</span><span class="na">getName</span><span class="p">().</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;WEB-INF/lib-provided/&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
        <span class="k">new</span> <span class="n">WarLauncher</span><span class="p">().</span><span class="na">launch</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></p>
<p>ä¸»è¦åŒºåˆ«åœ¨äºå’ŒJARçš„Class Pathä¸åŒï¼Œ<code>WEB-INF/classes/</code>å’Œ<code>WEB-INF/lib/</code>æ˜¯ä¼ ç»ŸServletåº”ç”¨çš„Class Pathè·¯å¾„ï¼Œ<code>WEB-INF/lib-provided/</code>æ˜¯Spring Bootçš„<code>WarLauncher</code>å®šåˆ¶å®ç°ã€‚</p>
<p>å°†<code>pom.xml</code>çš„<code>&lt;packaging&gt;</code>å…ƒç´ æ”¹ä¸º<code>war</code>ï¼š
<div class="highlight"><pre><span></span><code><span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>
</code></pre></div></p>
<p>å†æ¬¡ä½¿ç”¨Mavenè¿›è¡Œæ‰“åŒ…ï¼š
<div class="highlight"><pre><span></span><code>$ mvn clean package
[INFO] Scanning for projects...
[INFO] 
[INFO] ---------&lt; deep-in-spring-boot:first-spring-boot-application &gt;----------
[INFO] Building first-spring-boot-application 1.0.0-SNAPSHOT
[INFO] --------------------------------[ war ]---------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ first-spring-boot-application ---
[INFO] Deleting /Users/nanlei/Dev/Workspace/first-spring-boot-application/target
[INFO] 
[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ first-spring-boot-application ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Workspace/first-spring-boot-application/src/main/resources
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Workspace/first-spring-boot-application/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ first-spring-boot-application ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /Users/nanlei/Dev/Workspace/first-spring-boot-application/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ first-spring-boot-application ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Workspace/first-spring-boot-application/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ first-spring-boot-application ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /Users/nanlei/Dev/Workspace/first-spring-boot-application/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ first-spring-boot-application ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running deep.in.spring.boot.AppTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in deep.in.spring.boot.AppTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- maven-war-plugin:3.2.3:war (default-war) @ first-spring-boot-application ---
[INFO] Packaging webapp
[INFO] Assembling webapp [first-spring-boot-application] in [/Users/nanlei/Dev/Workspace/first-spring-boot-application/target/first-spring-boot-application-1.0.0-SNAPSHOT]
[INFO] Processing war project
[INFO] Webapp assembled in [102 msecs]
[INFO] Building war: /Users/nanlei/Dev/Workspace/first-spring-boot-application/target/first-spring-boot-application-1.0.0-SNAPSHOT.war
[INFO] 
[INFO] --- spring-boot-maven-plugin:2.3.1.RELEASE:repackage (repackage) @ first-spring-boot-application ---
[INFO] Replacing main artifact with repackaged archive
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.457 s
[INFO] Finished at: 2020-08-04T00:23:52+08:00
[INFO] ------------------------------------------------------------------------
</code></pre></div></p>
<p>åˆ‡æ¢åˆ°<code>target</code>ç›®å½•ï¼Œå°†<code>first-spring-boot-application-1.0.0-SNAPSHOT.war</code>è§£å‹ç¼©åˆ°tempç›®å½•ä¸‹ï¼š
<div class="highlight"><pre><span></span><code>$ cd target
$ unzip first-spring-boot-application-1.0.0-SNAPSHOT.war -d temp
Archive:  first-spring-boot-application-1.0.0-SNAPSHOT.war
   creating: temp/META-INF/
  inflating: temp/META-INF/MANIFEST.MF  
   creating: temp/org/
   creating: temp/org/springframework/
   creating: temp/org/springframework/boot/
   creating: temp/org/springframework/boot/loader/
  inflating: temp/org/springframework/boot/loader/ClassPathIndexFile.class  
  (çœç•¥éƒ¨åˆ†å†…å®¹...)
  inflating: temp/org/springframework/boot/loader/util/SystemPropertyUtils.class  
   creating: temp/WEB-INF/
   creating: temp/WEB-INF/classes/
   creating: temp/WEB-INF/classes/deep/
   creating: temp/WEB-INF/classes/deep/in/
   creating: temp/WEB-INF/classes/deep/in/spring/
   creating: temp/WEB-INF/classes/deep/in/spring/boot/
   creating: temp/WEB-INF/lib/
  inflating: temp/WEB-INF/classes/deep/in/spring/boot/App.class  
 extracting: temp/WEB-INF/lib/jackson-datatype-jsr310-2.11.0.jar  
  (çœç•¥éƒ¨åˆ†å†…å®¹...)
 extracting: temp/WEB-INF/lib/snakeyaml-1.26.jar  
   creating: temp/META-INF/maven/
   creating: temp/META-INF/maven/deep-in-spring-boot/
   creating: temp/META-INF/maven/deep-in-spring-boot/first-spring-boot-application/
  inflating: temp/META-INF/maven/deep-in-spring-boot/first-spring-boot-application/pom.xml  
  inflating: temp/META-INF/maven/deep-in-spring-boot/first-spring-boot-application/pom.properties  
 extracting: temp/WEB-INF/lib/log4j-to-slf4j-2.13.3.jar  
 extracting: temp/WEB-INF/lib/spring-context-5.2.7.RELEASE.jar  
 extracting: temp/WEB-INF/lib/spring-core-5.2.7.RELEASE.jar  
 extracting: temp/WEB-INF/lib/jul-to-slf4j-1.7.30.jar  
 extracting: temp/WEB-INF/lib/spring-boot-starter-2.3.1.RELEASE.jar  
 extracting: temp/WEB-INF/lib/spring-webmvc-5.2.7.RELEASE.jar  
   creating: temp/WEB-INF/lib-provided/
 extracting: temp/WEB-INF/lib-provided/spring-boot-loader-2.3.1.RELEASE.jar  
</code></pre></div></p>
<p>ä½¿ç”¨treeè§‚å¯Ÿç›®å½•ç»“æ„ï¼š
<div class="highlight"><pre><span></span><code> $ cd temp
 $ tree
.
â”œâ”€â”€ META-INF
â”‚Â Â  â”œâ”€â”€ MANIFEST.MF
â”‚Â Â  â””â”€â”€ maven
â”‚Â Â      â””â”€â”€ deep-in-spring-boot
â”‚Â Â          â””â”€â”€ first-spring-boot-application
â”‚Â Â              â”œâ”€â”€ pom.properties
â”‚Â Â              â””â”€â”€ pom.xml
â”œâ”€â”€ WEB-INF
â”‚Â Â  â”œâ”€â”€ classes
â”‚Â Â  â”‚Â Â  â””â”€â”€ deep
â”‚Â Â  â”‚Â Â      â””â”€â”€ in
â”‚Â Â  â”‚Â Â          â””â”€â”€ spring
â”‚Â Â  â”‚Â Â              â””â”€â”€ boot
â”‚Â Â  â”‚Â Â                  â””â”€â”€ App.class
â”‚Â Â  â”œâ”€â”€ lib
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ jackson-annotations-2.11.0.jar
â”‚   â”‚   â”œâ”€â”€ (çœç•¥éƒ¨åˆ†å†…å®¹...)
â”‚Â Â  â”‚Â Â  â””â”€â”€ tomcat-embed-websocket-9.0.36.jar
â”‚Â Â  â””â”€â”€ lib-provided
â”‚Â Â      â””â”€â”€ spring-boot-loader-2.3.1.RELEASE.jar
â””â”€â”€ org
    â””â”€â”€ springframework
        â””â”€â”€ boot
            â””â”€â”€ loader
                â”œâ”€â”€ ClassPathIndexFile.class
                â”œâ”€â”€ ExecutableArchiveLauncher.class
                â”œâ”€â”€ JarLauncher.class
                â”œâ”€â”€ (çœç•¥éƒ¨åˆ†å†…å®¹...)
                â”œâ”€â”€ WarLauncher.class
                â”œâ”€â”€ (çœç•¥éƒ¨åˆ†å†…å®¹...)

21 directories, 99 files
</code></pre></div></p>
<p>ç›¸æ¯”JARçš„è§£å‹ç›®å½•ï¼ŒWARå¢åŠ äº†<code>/WEB-INF/lib-provided/</code>ï¼Œå¹¶ä¸”è¯¥ç›®å½•ä¸‹ä»…æœ‰ä¸€ä¸ªJARæ–‡ä»¶ï¼Œå°±æ˜¯<code>spring-boot-loader-2.3.1.RELEASE.jar</code>ï¼Œä¹Ÿå°±æ˜¯è¯¥ç›®å½•ä¸‹å­˜æ”¾äº†<code>scope</code>ä¸º<code>provided</code>çš„JARæ–‡ä»¶ã€‚</p>
<p>å› ä¸ºä¼ ç»Ÿ<code>Servlet</code>é¡¹ç›®å¹¶ä¸éœ€è¦è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆ<code>/WEB-INF/lib-provided/</code>ä¸­çš„JARå°†è¢«<code>Servlet</code>å®¹å™¨å¿½ç•¥ï¼Œåˆæ¯”å¦‚Servlet APIï¼Œè¯¥APIç”±å®¹å™¨æä¾›ï¼Œä½†ç¼–ç æ—¶éœ€è¦ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„åœ¨äºWARæ–‡ä»¶èƒ½å¤Ÿåœ¨<code>Servlet</code>å®¹å™¨ä¸­å…¼å®¹è¿è¡Œã€‚</p>
<p>æŸ¥çœ‹<code>META-INF/MANIFEST.MF</code>çš„å†…å®¹ï¼š
<div class="highlight"><pre><span></span><code> $ cat META-INF/MANIFEST.MF 
Manifest-Version: 1.0
Implementation-Title: first-spring-boot-application
Implementation-Version: 1.0.0-SNAPSHOT
Start-Class: deep.in.spring.boot.App
Spring-Boot-Classes: WEB-INF/classes/
Spring-Boot-Lib: WEB-INF/lib/
Build-Jdk-Spec: 1.8
Spring-Boot-Version: 2.3.1.RELEASE
Created-By: Maven Archiver 3.4.0
Implementation-Vendor: Pivotal Software, Inc.
Main-Class: org.springframework.boot.loader.WarLauncher
</code></pre></div></p>
<p>æ›´æ”¹ä¸º<code>war</code>æ–¹å¼æ‰“åŒ…åï¼Œ<code>Main-Class</code>å°±æ˜¯<code>org.springframework.boot.loader.WarLauncher</code>äº†ï¼Œè€Œ<code>Start-Class</code>ä»ç„¶ä¸å˜ã€‚æ—¢ç„¶æ˜¯<code>WarLauncher</code>ä¸ºä¸»å¼•å¯¼ç±»ï¼Œé‚£ä¹ˆä¾ç„¶å¯ä»¥ä½¿ç”¨<code>java -jar</code>å‘½ä»¤æ¥å¯åŠ¨ï¼š
<div class="highlight"><pre><span></span><code>$ java -jar first-spring-boot-application-1.0.0-SNAPSHOT.war

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.1.RELEASE)

2020-08-04 00:34:25.529  INFO 35990 --- [           main] deep.in.spring.boot.App                  : Starting App v1.0.0-SNAPSHOT on nanleis-MacBook-Pro.local with PID 35990 (/Users/nanlei/Dev/Workspace/first-spring-boot-application/target/first-spring-boot-application-1.0.0-SNAPSHOT.war started by nanlei in /Users/nanlei/Dev/Workspace/first-spring-boot-application/target)
2020-08-04 00:34:25.532  INFO 35990 --- [           main] deep.in.spring.boot.App                  : No active profile set, falling back to default profiles: default
2020-08-04 00:34:26.576  INFO 35990 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2020-08-04 00:34:26.589  INFO 35990 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-08-04 00:34:26.589  INFO 35990 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.36]
2020-08-04 00:34:27.039  INFO 35990 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-08-04 00:34:27.040  INFO 35990 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1449 ms
2020-08-04 00:34:27.220  INFO 35990 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-04 00:34:27.473  INFO 35990 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;
2020-08-04 00:34:27.487  INFO 35990 --- [           main] deep.in.spring.boot.App                  : Started App in 2.373 seconds (JVM running for 2.815)
</code></pre></div></p>
<p>ç”±æ­¤å¯è§ï¼Œæ‰“åŒ…WARæ–‡ä»¶æ˜¯ä¸€ç§å…¼å®¹æªæ–½ï¼Œæ—¢èƒ½è¢«<code>WarLauncher</code>å¯åŠ¨ï¼Œä¹Ÿèƒ½å…¼å®¹<code>Servlet</code>å®¹å™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>JarLauncher</code>å’Œ<code>WarLauncher</code>å¹¶æ— æœ¬è´¨å·®åˆ«ã€‚</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../.." title="Home" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
            </div>
          </a>
        
        
          <a href="../02-spring-boot-maven-dependency/" title="Maven Dependencies" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Maven Dependencies
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Nan Lei
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>