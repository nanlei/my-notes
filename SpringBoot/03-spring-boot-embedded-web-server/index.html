


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tech Notes">
      
      
      
        <meta name="author" content="Nan Lei">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.7">
    
    
      
        <title>Embedded Web Server - Tech Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.b8ac9624.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.28f3ef9a.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#servlet-web" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Tech Notes" class="md-header-nav__button md-logo" aria-label="Tech Notes">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Tech Notes
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Embedded Web Server
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/nanlei/my-notes/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../SpringFramework/spring-stereotype-annotation/" class="md-tabs__link">
          Framework
        </a>
      
    </li>
  

  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../DataBase/MySQL/master-slave/" class="md-tabs__link">
          DataBase
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../DevOps/devops-centos/" class="md-tabs__link">
          DevOps
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tech Notes" class="md-nav__button md-logo" aria-label="Tech Notes">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Tech Notes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/nanlei/my-notes/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Framework
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Framework" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Spring Framework
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Spring Framework" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Spring Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1-1" type="checkbox" id="nav-2-1-1">
    
    <label class="md-nav__link" for="nav-2-1-1">
      Annotation Driven
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Annotation Driven" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Annotation Driven
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringFramework/spring-stereotype-annotation/" title="Stereotype Annotation" class="md-nav__link">
      Stereotype Annotation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2">
      Spring Boot
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Spring Boot" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Spring Boot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2-1" type="checkbox" id="nav-2-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-2-1">
      Notes
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01-spring-boot-application/" title="Standalone Application" class="md-nav__link">
      Standalone Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-spring-boot-maven-dependency/" title="Maven Dependencies" class="md-nav__link">
      Maven Dependencies
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Embedded Web Server
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Embedded Web Server" class="md-nav__link md-nav__link--active">
      Embedded Web Server
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#servlet-web" class="md-nav__link">
    嵌入式Servlet Web容器
  </a>
  
    <nav class="md-nav" aria-label="嵌入式Servlet Web容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-tomcatservlet-web" class="md-nav__link">
    1. Tomcat作为嵌入式Servlet Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-jettyservlet-web" class="md-nav__link">
    2. Jetty作为嵌入式Servlet Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-undertowservlet-web" class="md-nav__link">
    3. Undertow作为嵌入式Servlet Web容器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reactive-web" class="md-nav__link">
    嵌入式Reactive Web容器
  </a>
  
    <nav class="md-nav" aria-label="嵌入式Reactive Web容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-undertowreactive-web" class="md-nav__link">
    4. Undertow作为嵌入式Reactive Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-jettyreactive-web" class="md-nav__link">
    5. Jetty作为嵌入式Reactive Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-tomcatreactive-web" class="md-nav__link">
    6. Tomcat作为嵌入式Reactive Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-reactive-web" class="md-nav__link">
    7. 默认的嵌入式Reactive Web容器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-spring-boot-understanding-auto-config/" title="Understanding Auto-Configuration" class="md-nav__link">
      Understanding Auto-Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-spring-boot-understanding-prod-ready/" title="Understanding Production-Ready" class="md-nav__link">
      Understanding Production-Ready
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2-2" type="checkbox" id="nav-2-2-2">
    
    <label class="md-nav__link" for="nav-2-2-2">
      Samples
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Samples" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../app-shardingsphere-master-slave-mysql/" title="Shardingsphere master-slave with MySQL" class="md-nav__link">
      Shardingsphere master-slave with MySQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      DataBase
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DataBase" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        DataBase
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      MySQL
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MySQL" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MySQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DataBase/MySQL/master-slave/" title="Master Slave" class="md-nav__link">
      Master Slave
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      MongoDB
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MongoDB" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MongoDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DataBase/MongoDB/replica-set/" title="Replica Set" class="md-nav__link">
      Replica Set
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      DevOps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DevOps" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        DevOps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Linux
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Linux" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/devops-centos/" title="CentOS" class="md-nav__link">
      CentOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/devops-ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Docker
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/docker/" title="Basic" class="md-nav__link">
      Basic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      About
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="About" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="Who Am I" class="md-nav__link">
      Who Am I
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#servlet-web" class="md-nav__link">
    嵌入式Servlet Web容器
  </a>
  
    <nav class="md-nav" aria-label="嵌入式Servlet Web容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-tomcatservlet-web" class="md-nav__link">
    1. Tomcat作为嵌入式Servlet Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-jettyservlet-web" class="md-nav__link">
    2. Jetty作为嵌入式Servlet Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-undertowservlet-web" class="md-nav__link">
    3. Undertow作为嵌入式Servlet Web容器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reactive-web" class="md-nav__link">
    嵌入式Reactive Web容器
  </a>
  
    <nav class="md-nav" aria-label="嵌入式Reactive Web容器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-undertowreactive-web" class="md-nav__link">
    4. Undertow作为嵌入式Reactive Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-jettyreactive-web" class="md-nav__link">
    5. Jetty作为嵌入式Reactive Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-tomcatreactive-web" class="md-nav__link">
    6. Tomcat作为嵌入式Reactive Web容器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-reactive-web" class="md-nav__link">
    7. 默认的嵌入式Reactive Web容器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nanlei/my-notes/edit/master/docs/SpringBoot/03-spring-boot-embedded-web-server.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Embedded Web Server</h1>
                
                <h3 align="center"><b>03 - 嵌入式Web容器</b></h3>

<h3 id="servlet-web">嵌入式Servlet Web容器<a class="headerlink" href="#servlet-web" title="Permanent link">&para;</a></h3>
<p>从之前项目启动的日志中，总能看到一行：
<div class="highlight"><pre><span></span><code>[           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;
</code></pre></div></p>
<p>说明项目使用的Web容器是Tomcat，而在<code>pom.xml</code>中没有直接引入相关依赖，而在WAR包的解压目录下，可以看到<code>WEB-INF/lib/spring-boot-starter-tomcat-2.3.2.RELEASE.jar</code>的存在，说明该JAR文件应该由<code>spring-boot-starter-web</code>间接引入，使用Maven的<code>dependency</code>插件可以看到依赖关系：
<div class="highlight"><pre><span></span><code>$ mvn dependency:tree -Dincludes=*:spring-boot-starter-tomcat:jar:2.3.2.RELEASE
[INFO] Scanning for projects...
[INFO] 
[INFO] ---------&lt; deep-in-spring-boot:first-spring-boot-application &gt;----------
[INFO] Building first-spring-boot-application 1.0.0-SNAPSHOT
[INFO] --------------------------------[ war ]---------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ first-spring-boot-application ---
[INFO] deep-in-spring-boot:first-spring-boot-application:war:1.0.0-SNAPSHOT
[INFO] \- org.springframework.boot:spring-boot-starter-web:jar:2.3.2.RELEASE:compile
[INFO]    \- org.springframework.boot:spring-boot-starter-tomcat:jar:2.3.2.RELEASE:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  1.107 s
[INFO] Finished at: 2020-08-04T14:47:52+08:00
[INFO] ------------------------------------------------------------------------
</code></pre></div></p>
<p>在<a href="https://spring.io/projects/spring-boot" title="Spring Boot官方网站">Spring Boot官方网站</a>，介绍Spring Boot的特性时，有如下内容</p>
<blockquote>
<p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p>
</blockquote>
<p>示例项目都是<code>Servlet</code> Web程序，Spring Boot准备了3种嵌入式Web容器，分别是<code>Tomcat</code>，<code>Jetty</code>和<code>Undertow</code>。</p>
<p>在官方文档中，对3种Servlet容器的相关介绍：</p>
<blockquote>
<p>Spring Boot supports the following embedded servlet containers:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="center">Servlet Version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Tomcat 9.0</td>
<td align="center">4.0</td>
</tr>
<tr>
<td align="center">Jetty 9.4</td>
<td align="center">3.1</td>
</tr>
<tr>
<td align="center">Undertow 2.0</td>
<td align="center">4.0</td>
</tr>
</tbody>
</table>
<p>You can also deploy Spring Boot applications to any Servlet 3.1+ compatible container.</p>
</blockquote>
<h4 id="1-tomcatservlet-web">1. Tomcat作为嵌入式Servlet Web容器<a class="headerlink" href="#1-tomcatservlet-web" title="Permanent link">&para;</a></h4>
<p>嵌入式Tomcat作为Web应用的一部分，结合其API实现Servlet容器的引导。同样，Tomcat也提供了Maven插件，不需要编码，也不需要外置Tomcat容器，将当前应用直接打包为可运行的JAR或WAR文件，通过<code>java -jar</code>命令启动。</p>
<p>新建项目<code>servlet-sample</code>，结构如下：
<div class="highlight"><pre><span></span><code>$ tree .
.
├── pom.xml
└── src
    ├── main
    │   ├── java
    │   │   └── deep
    │   │       └── in
    │   │           └── spring
    │   │               └── boot
    │   │                   └── servlet
    │   │                       └── HelloServlet.java
    │   ├── resources
    │   └── webapp
    │       └── WEB-INF
    │           └── web.xml
    └── test
        └── java

13 directories, 3 files
</code></pre></div></p>
<p>传统的Java Web项目，需要在web根路径下有<code>WEB-INF/web.xml</code>文件存在，内容如下：
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://java.sun.com/xml/ns/javaee&quot;</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span>
         <span class="na">version=</span><span class="s">&quot;3.0&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;servlet&gt;</span>
        <span class="c">&lt;!-- Servlet 声明 --&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>HelloServlet<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;servlet-class&gt;</span>deep.in.spring.boot.servlet.HelloServlet<span class="nt">&lt;/servlet-class&gt;</span>
        <span class="nt">&lt;init-param&gt;</span>
            <span class="nt">&lt;param-name&gt;</span>init-param1<span class="nt">&lt;/param-name&gt;</span>
            <span class="nt">&lt;param-value&gt;</span>param1<span class="nt">&lt;/param-value&gt;</span>
        <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;/servlet&gt;</span>

    <span class="c">&lt;!-- 声明 Servlet 映射 --&gt;</span>
    <span class="nt">&lt;servlet-mapping&gt;</span>
        <span class="c">&lt;!-- 关联 Servlet--&gt;</span>
        <span class="nt">&lt;servlet-name&gt;</span>HelloServlet<span class="nt">&lt;/servlet-name&gt;</span>
        <span class="nt">&lt;url-pattern&gt;</span>/hello<span class="nt">&lt;/url-pattern&gt;</span>
    <span class="nt">&lt;/servlet-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></p>
<p>声明了一个Servlet，并配置一对初始化参数，同时声明该Servlet的映射地址，编写Servlet类：
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="p">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="p">(</span><span class="n">ServletConfig</span> <span class="n">servletConfig</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Collections</span><span class="p">.</span><span class="na">list</span><span class="p">(</span><span class="n">servletConfig</span><span class="p">.</span><span class="na">getInitParameterNames</span><span class="p">())</span>
                <span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">name</span> <span class="o">-&gt;</span> <span class="p">{</span>
                    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Init param name : &quot;</span> <span class="o">+</span> <span class="n">name</span>
                            <span class="o">+</span> <span class="s">&quot; , value : &quot;</span> <span class="o">+</span> <span class="n">servletConfig</span><span class="p">.</span><span class="na">getInitParameter</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
                <span class="p">});</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 输出 HTTP 请求参数 &quot;messsage&quot; 的内容（支持任意 HTTP 方法）</span>
<span class="cm">     *</span>
<span class="cm">     * @param request  {@link HttpServletRequest}</span>
<span class="cm">     * @param response {@link HttpServletResponse}</span>
<span class="cm">     * @throws IOException</span>
<span class="cm">     * @throws ServletException</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="p">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="p">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="p">)</span>
            <span class="kd">throws</span> <span class="n">IOException</span><span class="p">,</span> <span class="n">ServletException</span> <span class="p">{</span>
        <span class="c1">// 获取请求参数 &quot;message&quot; 内容</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;message : &quot;</span> <span class="o">+</span> <span class="n">message</span><span class="p">);</span>
        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="na">getWriter</span><span class="p">();</span>
        <span class="c1">// 输出 &quot;message&quot; 参数内容</span>
        <span class="n">writer</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
        <span class="n">writer</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>项目的<code>pom.xml</code>中引入相关依赖和插件配置：
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>
         <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>deep-in-spring-boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>servlet-sample<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="c">&lt;!-- 使用 Servlet 3.1 API --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>javax.servlet<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>javax.servlet-api<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>3.1.0<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="c">&lt;!-- Tomcat 8 Maven 插件用于构建可执行 war --&gt;</span>
            <span class="c">&lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat.maven/tomcat8-maven-plugin --&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.tomcat.maven<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>tomcat8-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>3.0-r1655215<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;executions&gt;</span>
                    <span class="nt">&lt;execution&gt;</span>
                        <span class="nt">&lt;id&gt;</span>tomcat-run<span class="nt">&lt;/id&gt;</span>
                        <span class="nt">&lt;goals&gt;</span>
                            <span class="c">&lt;!-- 最终打包成可执行的jar包 --&gt;</span>
                            <span class="nt">&lt;goal&gt;</span>exec-war-only<span class="nt">&lt;/goal&gt;</span>
                        <span class="nt">&lt;/goals&gt;</span>
                        <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
                        <span class="nt">&lt;configuration&gt;</span>
                            <span class="c">&lt;!-- ServletContext 路径 --&gt;</span>
                            <span class="nt">&lt;path&gt;</span>/<span class="nt">&lt;/path&gt;</span>
                        <span class="nt">&lt;/configuration&gt;</span>
                    <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;configuration&gt;</span>
                    <span class="nt">&lt;source&gt;</span>8<span class="nt">&lt;/source&gt;</span>
                    <span class="nt">&lt;target&gt;</span>8<span class="nt">&lt;/target&gt;</span>
                <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>

    <span class="nt">&lt;pluginRepositories&gt;</span>
        <span class="nt">&lt;pluginRepository&gt;</span>
            <span class="c">&lt;!-- tomcat8-maven-plugin 所在仓库 --&gt;</span>
            <span class="nt">&lt;id&gt;</span>Alfresco<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;name&gt;</span>Alfresco Repository<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;url&gt;</span>https://artifacts.alfresco.com/nexus/content/repositories/public/<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;snapshots&gt;</span>
                <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
            <span class="nt">&lt;/snapshots&gt;</span>
        <span class="nt">&lt;/pluginRepository&gt;</span>
    <span class="nt">&lt;/pluginRepositories&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></p>
<p>准备好所需内容后直接执行打包：
<div class="highlight"><pre><span></span><code>$ mvn clean package
[INFO] Scanning for projects...
[INFO] 
[INFO] -----------------&lt; deep-in-spring-boot:servlet-sample &gt;-----------------
[INFO] Building servlet-sample 1.0.0-SNAPSHOT
[INFO] --------------------------------[ war ]---------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ servlet-sample ---
[INFO] Deleting /Users/nanlei/Dev/Codebase/deep-in-spring-boot/servlet-sample/target
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ servlet-sample ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ servlet-sample ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /Users/nanlei/Dev/Codebase/deep-in-spring-boot/servlet-sample/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ servlet-sample ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/nanlei/Dev/Codebase/deep-in-spring-boot/servlet-sample/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ servlet-sample ---
[INFO] Changes detected - recompiling the module!
[INFO] 
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ servlet-sample ---
[INFO] 
[INFO] --- maven-war-plugin:2.2:war (default-war) @ servlet-sample ---
[INFO] Packaging webapp
[INFO] Assembling webapp [servlet-sample] in [/Users/nanlei/Dev/Codebase/deep-in-spring-boot/servlet-sample/target/servlet-sample-1.0.0-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/Users/nanlei/Dev/Codebase/deep-in-spring-boot/servlet-sample/src/main/webapp]
[INFO] Webapp assembled in [26 msecs]
[INFO] Building war: /Users/nanlei/Dev/Codebase/deep-in-spring-boot/servlet-sample/target/servlet-sample-1.0.0-SNAPSHOT.war
[INFO] WEB-INF/web.xml already added, skipping
[INFO] 
[INFO] --- tomcat8-maven-plugin:3.0-r1655215:exec-war-only (tomcat-run) @ servlet-sample ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.817 s
[INFO] Finished at: 2020-08-06T14:47:16+08:00
[INFO] ------------------------------------------------------------------------
</code></pre></div></p>
<p>打包完成，使用<code>java -jar</code>命令运行：
<div class="highlight"><pre><span></span><code>$ cd target
$ java -jar servlet-sample-1.0.0-SNAPSHOT-war-exec.jar
Aug 06, 2020 2:50:17 PM org.apache.coyote.http11.Http11NioProtocol init
INFO: Initializing ProtocolHandler [&quot;http-nio-8080&quot;]
Aug 06, 2020 2:50:17 PM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector
INFO: Using a shared selector for servlet write/read
Aug 06, 2020 2:50:17 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Tomcat
Aug 06, 2020 2:50:17 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/8.0.14
Aug 06, 2020 2:50:18 PM org.apache.jasper.servlet.TldScanner scanJars
INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
Aug 06, 2020 2:50:18 PM org.apache.coyote.http11.Http11NioProtocol start
INFO: Starting ProtocolHandler [&quot;http-nio-8080&quot;]
</code></pre></div></p>
<p>测试HTTP服务：
<div class="highlight"><pre><span></span><code>$ curl http://127.0.0.1:8080/hello?message=helloworld
helloworld
</code></pre></div></p>
<p>同时可以看到命令行输出：
<div class="highlight"><pre><span></span><code>Init param name : init-param1 , value : param1
message : helloworld
</code></pre></div></p>
<p>此时在target目录下出现解压的<code>.extract</code>目录，观察结构：
<div class="highlight"><pre><span></span><code>$ tree .extract/
.extract/
├── conf
│   └── web.xml
├── logs
│   └── access_log.2020-08-06
├── temp
├── webapps
│   ├── ROOT
│   │   ├── META-INF
│   │   │   ├── MANIFEST.MF
│   │   │   └── maven
│   │   │       └── deep-in-spring-boot
│   │   │           └── servlet-sample
│   │   │               ├── pom.properties
│   │   │               └── pom.xml
│   │   └── WEB-INF
│   │       ├── classes
│   │       │   └── deep
│   │       │       └── in
│   │       │           └── spring
│   │       │               └── boot
│   │       │                   └── servlet
│   │       │                       └── HelloServlet.class
│   │       └── web.xml
│   └── ROOT.war
└── work
    └── Tomcat
        └── localhost
            └── ROOT

20 directories, 8 files
</code></pre></div></p>
<p>由此可见，Tomcat Maven插件并非嵌入式Tomcat，仍为传统Tomcat容器部署方式，将应用打包为<code>ROOT.war</code>，然后在Tomcat启动过程中将<code>ROOT.war</code>部署到<code>webapps</code>目录，但该插件支持指定<code>ServletContext</code>路径。</p>
<p>Spring Boot使用嵌入式Tomcat构建为<code>TomcatWebServer</code> Bean，由Spring上下文将其引导，嵌入式组件的运行，<code>ClassLoader</code>的装载均由Spring Boot框架完成。</p>
<p>Tomcat Maven插件打包后的JAR或WAR属于非FAT模式，归档文件会被压缩，而Spring Boot Maven插件<code>spring-boot-maven-plugin</code>使用零压缩模式，将应用归档到JAR或WAR包中，在jar命令帮助中有介绍：
<div class="highlight"><pre><span></span><code>$ jar
Usage: jar {ctxui}[vfmn0PMe] [jar-file] [manifest-file] [entry-point] [-C dir] files ...
Options:
    -c  create new archive
    -t  list table of contents for archive
    -x  extract named (or all) files from archive
    -u  update existing archive
    -v  generate verbose output on standard output
    -f  specify archive file name
    -m  include manifest information from specified manifest file
    -n  perform Pack200 normalization after creating a new archive
    -e  specify application entry point for stand-alone application 
        bundled into an executable jar file
    -0  store only; use no ZIP compression
    -P  preserve leading &#39;/&#39; (absolute path) and &quot;..&quot; (parent directory) components from file names
    -M  do not create a manifest file for the entries
    -i  generate index information for the specified jar files
    -C  change to the specified directory and include the following file
If any file is a directory then it is processed recursively.
The manifest file name, the archive file name and the entry point name are
specified in the same order as the &#39;m&#39;, &#39;f&#39; and &#39;e&#39; flags.

Example 1: to archive two class files into an archive called classes.jar: 
       jar cvf classes.jar Foo.class Bar.class 
Example 2: use an existing manifest file &#39;mymanifest&#39; and archive all the
           files in the foo/ directory into &#39;classes.jar&#39;: 
       jar cvfm classes.jar mymanifest -C foo/ .
</code></pre></div></p>
<p>传统Servlet容器将压缩的WAR文件解压到对应目录，再加载该目录中的资源。而Spring Boot的可执行WAR文件需要在不解压的前提下读取其中资源，也就是<code>spring-boot-loader</code>需要覆盖内建JAR协议的URLStreamHandler的原因所在。</p>
<h4 id="2-jettyservlet-web">2. Jetty作为嵌入式Servlet Web容器<a class="headerlink" href="#2-jettyservlet-web" title="Permanent link">&para;</a></h4>
<p>将默认的嵌入式容器Tomact切换至Jetty的步骤非常简单，官方文档对此有详细说明：</p>
<blockquote>
<p><b>Use Another Web Server</b><br />
Many Spring Boot starters include default embedded containers.</p>
<p>For servlet stack applications, the <code>spring-boot-starter-web</code> includes Tomcat by including <code>spring-boot-starter-tomcat</code>, but you can use <code>spring-boot-starter-jetty</code> or <code>spring-boot-starter-undertow</code> instead.</p>
<p>For reactive stack applications, the <code>spring-boot-starter-webflux</code> includes Reactor Netty by including <code>spring-boot-starter-reactor-netty</code>, but you can use <code>spring-boot-starter-tomcat</code>, <code>spring-boot-starter-jetty</code>, or <code>spring-boot-starter-undertow</code> instead.</p>
<p>When switching to a different HTTP server, you need to exclude the default dependencies in addition to including the one you need. To help with this process, Spring Boot provides a separate starter for each of the supported HTTP servers.</p>
<p>The following Maven example shows how to exclude Tomcat and include Jetty for Spring MVC:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;servlet-api.version&gt;</span>3.1.0<span class="nt">&lt;/servlet-api.version&gt;</span>
<span class="nt">&lt;/properties&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;exclusions&gt;</span>
        <span class="c">&lt;!-- Exclude the Tomcat dependency --&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
    <span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="c">&lt;!-- Use Jetty instead --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-jetty<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>

<p>The version of the Servlet API has been overridden as, unlike Tomcat 9 and Undertow 2.0, Jetty 9.4 does not support Servlet 4.0.</p>
</blockquote>
<p>根据官方文档的说明，新建项目<code>embedded-web-server</code>。前面分析过<code>spring-boot-starter-tomcat</code>为<code>spring-boot-starter-web</code>间接引入，所以在依赖中需要排除，再添加新的Jetty依赖<code>spring-boot-starter-jetty</code>即可。</p>
<p>运行项目：
<div class="highlight"><pre><span></span><code>$ mvn spring-boot:run
[INFO] Scanning for projects...
(省略部分内容...)
[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.3.2.RELEASE:run (default-cli) &lt; test-compile @ first-spring-boot-application &lt;&lt;&lt;
[INFO] 
[INFO] 
[INFO] --- spring-boot-maven-plugin:2.3.2.RELEASE:run (default-cli) @ first-spring-boot-application ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.2.RELEASE)

2020-08-06 17:50:22.470  INFO 8185 --- [           main] deep.in.spring.boot.App                  : Starting App on nanleis-MacBook-Pro.local with PID 8185 (/Users/nanlei/Dev/Codebase/deep-in-spring-boot/first-spring-boot-application/target/classes started by nanlei in /Users/nanlei/Dev/Codebase/deep-in-spring-boot/first-spring-boot-application)
2020-08-06 17:50:22.472  INFO 8185 --- [           main] deep.in.spring.boot.App                  : No active profile set, falling back to default profiles: default
2020-08-06 17:50:22.916  INFO 8185 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @947ms to org.eclipse.jetty.util.log.Slf4jLog
2020-08-06 17:50:23.023  INFO 8185 --- [           main] o.s.b.w.e.j.JettyServletWebServerFactory : Server initialized with port: 8080
2020-08-06 17:50:23.024  INFO 8185 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.30.v20200611; built: 2020-06-11T12:34:51.929Z; git: 271836e4c1f4612f12b7bb13ef5a92a927634b0d; jvm 1.8.0_251-b08
2020-08-06 17:50:23.043  INFO 8185 --- [           main] o.e.j.s.h.ContextHandler.application     : Initializing Spring embedded WebApplicationContext
2020-08-06 17:50:23.043  INFO 8185 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 531 ms
2020-08-06 17:50:23.111  INFO 8185 --- [           main] org.eclipse.jetty.server.session         : DefaultSessionIdManager workerName=node0
2020-08-06 17:50:23.111  INFO 8185 --- [           main] org.eclipse.jetty.server.session         : No SessionScavenger set, using defaults
2020-08-06 17:50:23.112  INFO 8185 --- [           main] org.eclipse.jetty.server.session         : node0 Scavenging every 660000ms
2020-08-06 17:50:23.118  INFO 8185 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.s.b.w.e.j.JettyEmbeddedWebAppContext@6c67e137{application,/,[file:///private/var/folders/dy/g2n42jw12y3g6th2pgtz59_c0000gn/T/jetty-docbase.8002049805771173289.8080/],AVAILABLE}
2020-08-06 17:50:23.118  INFO 8185 --- [           main] org.eclipse.jetty.server.Server          : Started @1150ms
2020-08-06 17:50:23.214  INFO 8185 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-06 17:50:23.303  INFO 8185 --- [           main] o.e.j.s.h.ContextHandler.application     : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;
2020-08-06 17:50:23.303  INFO 8185 --- [           main] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;
2020-08-06 17:50:23.307  INFO 8185 --- [           main] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-08-06 17:50:23.334  INFO 8185 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@b6b1987{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}
2020-08-06 17:50:23.336  INFO 8185 --- [           main] o.s.b.web.embedded.jetty.JettyWebServer  : Jetty started on port(s) 8080 (http/1.1) with context path &#39;/&#39;
2020-08-06 17:50:23.343  INFO 8185 --- [           main] deep.in.spring.boot.App                  : Started App in 1.098 seconds (JVM running for 1.374)
</code></pre></div></p>
<p>项目正常启动，不同的是，运行容器切换到了Jetty，其中<code>org.springframework.boot.web.embedded.jetty.JettyWebServer</code>就是Spring Boot结合Jetty API实现的<code>org.springframework.boot.web.server.WebServer</code> Bean。</p>
<h4 id="3-undertowservlet-web">3. Undertow作为嵌入式Servlet Web容器<a class="headerlink" href="#3-undertowservlet-web" title="Permanent link">&para;</a></h4>
<p>若将Servlet容器切换到Undertow，移除<code>spring-boot-starter-tomcat</code>依赖后再添加<code>spring-boot-starter-undertow</code>依赖即可，再次运行项目：
<div class="highlight"><pre><span></span><code>$ mvn spring-boot:run
[INFO] Scanning for projects...
(省略部分内容...)
[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.3.2.RELEASE:run (default-cli) &lt; test-compile @ first-spring-boot-application &lt;&lt;&lt;
[INFO] 
[INFO] 
[INFO] --- spring-boot-maven-plugin:2.3.2.RELEASE:run (default-cli) @ first-spring-boot-application ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.2.RELEASE)

2020-08-06 18:06:05.804  INFO 8332 --- [           main] deep.in.spring.boot.App                  : Starting App on nanleis-MacBook-Pro.local with PID 8332 (/Users/nanlei/Dev/Codebase/deep-in-spring-boot/first-spring-boot-application/target/classes started by nanlei in /Users/nanlei/Dev/Codebase/deep-in-spring-boot/first-spring-boot-application)
2020-08-06 18:06:05.806  INFO 8332 --- [           main] deep.in.spring.boot.App                  : No active profile set, falling back to default profiles: default
2020-08-06 18:06:06.317  WARN 8332 --- [           main] io.undertow.websockets.jsr               : UT026010: Buffer pool was not set on WebSocketDeploymentInfo, the default pool will be used
2020-08-06 18:06:06.334  INFO 8332 --- [           main] io.undertow.servlet                      : Initializing Spring embedded WebApplicationContext
2020-08-06 18:06:06.334  INFO 8332 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 488 ms
2020-08-06 18:06:06.449  INFO 8332 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;
2020-08-06 18:06:06.531  INFO 8332 --- [           main] io.undertow                              : starting server: Undertow - 2.1.3.Final
2020-08-06 18:06:06.534  INFO 8332 --- [           main] org.xnio                                 : XNIO version 3.8.0.Final
2020-08-06 18:06:06.542  INFO 8332 --- [           main] org.xnio.nio                             : XNIO NIO Implementation Version 3.8.0.Final
2020-08-06 18:06:06.601  INFO 8332 --- [           main] org.jboss.threads                        : JBoss Threads version 3.1.0.Final
2020-08-06 18:06:06.649  INFO 8332 --- [           main] o.s.b.w.e.undertow.UndertowWebServer     : Undertow started on port(s) 8080 (http)
2020-08-06 18:06:06.656  INFO 8332 --- [           main] deep.in.spring.boot.App                  : Started App in 1.068 seconds (JVM running for 1.323)
</code></pre></div></p>
<p>从日志中可以看到，Undertow Web容器已经成功启动，但这里的输出日志是<code>UndertowWebServer</code>，而实际上此处Undertow的实现是<code>org.springframework.boot.web.embedded.undertow.UndertowServletWebServer</code>，它继承自<code>UndertowWebServer</code>，由于当前版本的子类<code>UndertowServletWebServer</code>中没有定义日志输出，而是在父类<code>UndertowWebServer</code>进行中输出的，所以在日志上没有明确说明。</p>
<p>这里也可以进行断点跟踪来确定，在<code>ServletWebServerApplicationContext</code>中有<code>createWebServer()</code>方法，在Spring Boot项目启动过程中会执行到此，进行断点跟踪，就能明确实际创建的<code>WebServer</code>的具体实例是什么。</p>
<p><img alt="UndertowServletWebServer" src="../img/undertow.servlet.web.server.png" /></p>
<h3 id="reactive-web">嵌入式Reactive Web容器<a class="headerlink" href="#reactive-web" title="Permanent link">&para;</a></h3>
<p>嵌入式Reactive Web容器通常处于被动激活状态，需要增加<code>spring-boot-starter-webflux</code>依赖，而它和<code>spring-boot-starter-web</code>同时存在时，<code>spring-boot-starter-webflux</code>会被忽略，这是<code>SpringApplication</code>中对Web应用类型的推断决定的：
<div class="highlight"><pre><span></span><code>    <span class="cm">/**</span>
<span class="cm">     * Create a new {@link SpringApplication} instance. The application context will load</span>
<span class="cm">     * beans from the specified primary sources (see {@link SpringApplication class-level}</span>
<span class="cm">     * documentation for details. The instance can be customized before calling</span>
<span class="cm">     * {@link #run(String...)}.</span>
<span class="cm">     * @param resourceLoader the resource loader to use</span>
<span class="cm">     * @param primarySources the primary bean sources</span>
<span class="cm">     * @see #run(Class, String[])</span>
<span class="cm">     * @see #setSources(Set)</span>
<span class="cm">     */</span>
    <span class="nd">@SuppressWarnings</span><span class="p">({</span> <span class="s">&quot;unchecked&quot;</span><span class="p">,</span> <span class="s">&quot;rawtypes&quot;</span> <span class="p">})</span>
    <span class="kd">public</span> <span class="nf">SpringApplication</span><span class="p">(</span><span class="n">ResourceLoader</span> <span class="n">resourceLoader</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="p">...</span> <span class="n">primarySources</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">resourceLoader</span> <span class="o">=</span> <span class="n">resourceLoader</span><span class="p">;</span>
        <span class="n">Assert</span><span class="p">.</span><span class="na">notNull</span><span class="p">(</span><span class="n">primarySources</span><span class="p">,</span> <span class="s">&quot;PrimarySources must not be null&quot;</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="na">primarySources</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashSet</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">primarySources</span><span class="p">));</span>
        <span class="k">this</span><span class="p">.</span><span class="na">webApplicationType</span> <span class="o">=</span> <span class="n">WebApplicationType</span><span class="p">.</span><span class="na">deduceFromClasspath</span><span class="p">();</span>
        <span class="n">setInitializers</span><span class="p">((</span><span class="n">Collection</span><span class="p">)</span> <span class="n">getSpringFactoriesInstances</span><span class="p">(</span><span class="n">ApplicationContextInitializer</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
        <span class="n">setListeners</span><span class="p">((</span><span class="n">Collection</span><span class="p">)</span> <span class="n">getSpringFactoriesInstances</span><span class="p">(</span><span class="n">ApplicationListener</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
        <span class="k">this</span><span class="p">.</span><span class="na">mainApplicationClass</span> <span class="o">=</span> <span class="n">deduceMainApplicationClass</span><span class="p">();</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>创建<code>SpringApplication</code>实例时，<code>this.webApplicationType = WebApplicationType.deduceFromClasspath();</code>就是对Web应用的类型进行推断，其具体逻辑在枚举类<code>WebApplicationType</code>中：
<div class="highlight"><pre><span></span><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">WEBMVC_INDICATOR_CLASS</span> <span class="o">=</span> <span class="s">&quot;org.springframework.web.servlet.DispatcherServlet&quot;</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">WEBFLUX_INDICATOR_CLASS</span> <span class="o">=</span> <span class="s">&quot;org.springframework.web.reactive.DispatcherHandler&quot;</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">JERSEY_INDICATOR_CLASS</span> <span class="o">=</span> <span class="s">&quot;org.glassfish.jersey.servlet.ServletContainer&quot;</span><span class="p">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SERVLET_APPLICATION_CONTEXT_CLASS</span> <span class="o">=</span> <span class="s">&quot;org.springframework.web.context.WebApplicationContext&quot;</span><span class="p">;</span>

    <span class="kd">static</span> <span class="n">WebApplicationType</span> <span class="nf">deduceFromClasspath</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ClassUtils</span><span class="p">.</span><span class="na">isPresent</span><span class="p">(</span><span class="n">WEBFLUX_INDICATOR_CLASS</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">ClassUtils</span><span class="p">.</span><span class="na">isPresent</span><span class="p">(</span><span class="n">WEBMVC_INDICATOR_CLASS</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span>
                <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">ClassUtils</span><span class="p">.</span><span class="na">isPresent</span><span class="p">(</span><span class="n">JERSEY_INDICATOR_CLASS</span><span class="p">,</span> <span class="kc">null</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">WebApplicationType</span><span class="p">.</span><span class="na">REACTIVE</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">String</span> <span class="n">className</span> <span class="p">:</span> <span class="n">SERVLET_INDICATOR_CLASSES</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ClassUtils</span><span class="p">.</span><span class="na">isPresent</span><span class="p">(</span><span class="n">className</span><span class="p">,</span> <span class="kc">null</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">WebApplicationType</span><span class="p">.</span><span class="na">NONE</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">WebApplicationType</span><span class="p">.</span><span class="na">SERVLET</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>可以很容易看出，只有当<code>spring-boot-starter-webflux</code>单独存在是，<code>WebApplicationType</code>才是REACTIVE类型。</p>
<h4 id="4-undertowreactive-web">4. Undertow作为嵌入式Reactive Web容器<a class="headerlink" href="#4-undertowreactive-web" title="Permanent link">&para;</a></h4>
<p>修改pom.xml，添加相关依赖：
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-webflux<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>2.3.2.RELEASE<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-undertow<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div></p>
<p>编写一些WebFlux代码，并将<code>maven-compiler-plugin</code>的编译级别调整到1.8：
<div class="highlight"><pre><span></span><code><span class="nd">@RestController</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="p">{</span>

    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;Welcome to SpringBoot&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">RouterFunction</span><span class="o">&lt;</span><span class="n">ServerResponse</span><span class="o">&gt;</span> <span class="nf">helloworld</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">route</span><span class="p">(</span><span class="n">GET</span><span class="p">(</span><span class="s">&quot;/helloworld&quot;</span><span class="p">),</span>
                <span class="n">request</span> <span class="o">-&gt;</span> <span class="n">ok</span><span class="p">().</span><span class="na">body</span><span class="p">(</span><span class="n">Mono</span><span class="p">.</span><span class="na">just</span><span class="p">(</span><span class="s">&quot;Hello World&quot;</span><span class="p">),</span> <span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>启动项目：
<div class="highlight"><pre><span></span><code>$ mvn spring-boot:run
[INFO] Scanning for projects...
(省略部分内容...)
[INFO] --- spring-boot-maven-plugin:2.3.2.RELEASE:run (default-cli) @ first-spring-boot-application ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.2.RELEASE)

2020-08-07 14:03:53.126  INFO 3738 --- [           main] deep.in.spring.boot.App                  : Starting App on nanleis-MacBook-Pro.local with PID 3738 (/Users/nanlei/Dev/Codebase/deep-in-spring-boot/first-spring-boot-application/target/classes started by nanlei in /Users/nanlei/Dev/Codebase/deep-in-spring-boot/first-spring-boot-application)
2020-08-07 14:03:53.130  INFO 3738 --- [           main] deep.in.spring.boot.App                  : No active profile set, falling back to default profiles: default
2020-08-07 14:03:53.717  INFO 3738 --- [           main] io.undertow                              : starting server: Undertow - 2.1.3.Final
2020-08-07 14:03:53.721  INFO 3738 --- [           main] org.xnio                                 : XNIO version 3.8.0.Final
2020-08-07 14:03:53.727  INFO 3738 --- [           main] org.xnio.nio                             : XNIO NIO Implementation Version 3.8.0.Final
2020-08-07 14:03:53.793  INFO 3738 --- [           main] org.jboss.threads                        : JBoss Threads version 3.1.0.Final
2020-08-07 14:03:53.853  INFO 3738 --- [           main] o.s.b.w.e.undertow.UndertowWebServer     : Undertow started on port(s) 8080 (http)
2020-08-07 14:03:53.862  INFO 3738 --- [           main] deep.in.spring.boot.App                  : Started App in 0.947 seconds (JVM running for 1.206)
</code></pre></div></p>
<p>此时仍然启动的是<code>UndertowWebServer</code>实例，但实际情况还是通过断点跟踪来一探究竟：</p>
<p><img alt="UndertowReactiveWebServer" src="../img/undertow.reactive.web.server.png" /></p>
<p>要注意的是，运行在REACTIVE类型下，Spring的上下文就是<code>ReactiveWebServerApplicationContext</code>了，其中的<code>createWebServer()</code>方法和<code>ServletWebServerApplicationContext</code>的略有不同：
<div class="highlight"><pre><span></span><code>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">createWebServer</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">WebServerManager</span> <span class="n">serverManager</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">serverManager</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">serverManager</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">String</span> <span class="n">webServerFactoryBeanName</span> <span class="o">=</span> <span class="n">getWebServerFactoryBeanName</span><span class="p">();</span>
            <span class="n">ReactiveWebServerFactory</span> <span class="n">webServerFactory</span> <span class="o">=</span> <span class="n">getWebServerFactory</span><span class="p">(</span><span class="n">webServerFactoryBeanName</span><span class="p">);</span>
            <span class="kt">boolean</span> <span class="n">lazyInit</span> <span class="o">=</span> <span class="n">getBeanFactory</span><span class="p">().</span><span class="na">getBeanDefinition</span><span class="p">(</span><span class="n">webServerFactoryBeanName</span><span class="p">).</span><span class="na">isLazyInit</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="na">serverManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebServerManager</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">webServerFactory</span><span class="p">,</span> <span class="k">this</span><span class="p">::</span><span class="n">getHttpHandler</span><span class="p">,</span> <span class="n">lazyInit</span><span class="p">);</span>
            <span class="n">getBeanFactory</span><span class="p">().</span><span class="na">registerSingleton</span><span class="p">(</span><span class="s">&quot;webServerGracefulShutdown&quot;</span><span class="p">,</span>
                <span class="k">new</span> <span class="n">WebServerGracefulShutdownLifecycle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">serverManager</span><span class="p">));</span>
            <span class="n">getBeanFactory</span><span class="p">().</span><span class="na">registerSingleton</span><span class="p">(</span><span class="s">&quot;webServerStartStop&quot;</span><span class="p">,</span>
                <span class="k">new</span> <span class="n">WebServerStartStopLifecycle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">serverManager</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="n">initPropertySources</span><span class="p">();</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>二者都是<code>WebServerApplicationContext</code>接口的子类，其中的<code>getWebServer()</code>方法就可以获取到运行的<code>WebServer</code>实例，在<code>App.java</code>中添加相关代码：
<div class="highlight"><pre><span></span><code>    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="n">ApplicationRunner</span> <span class="nf">runner</span><span class="p">(</span><span class="n">WebServerApplicationContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">args</span> <span class="o">-&gt;</span> <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;WebServer type: &quot;</span> <span class="o">+</span> <span class="n">context</span><span class="p">.</span><span class="na">getWebServer</span><span class="p">().</span><span class="na">getClass</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
        <span class="p">};</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>利用了<code>ApplicationRunner</code>接口的特性，在<code>SpringApplication</code>启动后回调。再次启动项目可以看到控制台输出：
<div class="highlight"><pre><span></span><code>2020-08-07 14:19:58.687  INFO 3867 --- [           main] o.s.b.w.e.undertow.UndertowWebServer     : Undertow started on port(s) 8080 (http)
2020-08-07 14:19:58.722  INFO 3867 --- [           main] deep.in.spring.boot.App                  : Started App in 2.19 seconds (JVM running for 2.659)
WebServer type: org.springframework.boot.web.embedded.undertow.UndertowWebServer
</code></pre></div></p>
<p>继续测试HTTP服务：
<div class="highlight"><pre><span></span><code>$ curl http://localhost:8080
Welcome to Spring
$ curl http://localhost:8080/helloworld
Hello World
</code></pre></div></p>
<p>但在上面使用<code>ApplicationRunner</code>注入<code>WebServerApplicationContext</code>时，代码存在一个潜在的问题：没有考虑非Web应用的情况。可以利用Spring的事件机制来进行完善。</p>
<p>Spring Boot官方文档对相关事件的介绍：</p>
<blockquote>
<p>the following events are also published after <code>ApplicationPreparedEvent</code> and before <code>ApplicationStartedEvent</code>:<br />
A <code>WebServerInitializedEvent</code> is sent after the <code>WebServer</code> is ready. <code>ServletWebServerInitializedEvent</code> and <code>ReactiveWebServerInitializedEvent</code> are the servlet and reactive variants respectively.</p>
</blockquote>
<p>Servlet和Reactive有各自的初始化事件，使用它们的父类<code>WebServerInitializedEvent</code>则覆盖的范围更广，修改<code>App.java</code>代码：
<div class="highlight"><pre><span></span><code><span class="c1">//    @Bean</span>
<span class="c1">//    public ApplicationRunner runner(WebServerApplicationContext context) {</span>
<span class="c1">//        return args -&gt; {</span>
<span class="c1">//            System.out.println(&quot;WebServer type: &quot; + context.getWebServer().getClass().getName());</span>
<span class="c1">//        };</span>
<span class="c1">//    }</span>

    <span class="nd">@EventListener</span><span class="p">(</span><span class="n">WebServerInitializedEvent</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onWebServerReady</span><span class="p">(</span><span class="n">WebServerInitializedEvent</span> <span class="n">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;WebServer Type: &quot;</span> <span class="o">+</span> <span class="n">event</span><span class="p">.</span><span class="na">getWebServer</span><span class="p">().</span><span class="na">getClass</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>启动项目，依然可以得到结果，但程序健壮性更佳，即便不在Web应用中运行，也不会注入<code>WebServerApplicationContext</code>失败：
<div class="highlight"><pre><span></span><code>2020-08-07 15:24:05.760  INFO 4413 --- [           main] o.s.b.w.e.undertow.UndertowWebServer     : Undertow started on port(s) 8080 (http)
WebServer Type: org.springframework.boot.web.embedded.undertow.UndertowWebServer
2020-08-07 15:24:05.772  INFO 4413 --- [           main] deep.in.spring.boot.App                  : Started App in 1.87 seconds (JVM running for 2.319)
</code></pre></div></p>
<p>注意输出的顺序，理解事件机制的时序。</p>
<h4 id="5-jettyreactive-web">5. Jetty作为嵌入式Reactive Web容器<a class="headerlink" href="#5-jettyreactive-web" title="Permanent link">&para;</a></h4>
<p>和上面类似，若要使用Jetty作为Web容器，只需修改<code>pom.xml</code>中的依赖即可：
<div class="highlight"><pre><span></span><code>        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-jetty<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></p>
<p>启动项目得到类似的输出：
<div class="highlight"><pre><span></span><code>2020-08-07 15:32:04.568  INFO 4478 --- [           main] o.s.b.web.embedded.jetty.JettyWebServer  : Jetty started on port(s) 8080 (http/1.1) with context path &#39;/&#39;
WebServer Type: org.springframework.boot.web.embedded.jetty.JettyWebServer
2020-08-07 15:32:04.579  INFO 4478 --- [           main] deep.in.spring.boot.App                  : Started App in 1.448 seconds (JVM running for 1.877)
</code></pre></div></p>
<h4 id="6-tomcatreactive-web">6. Tomcat作为嵌入式Reactive Web容器<a class="headerlink" href="#6-tomcatreactive-web" title="Permanent link">&para;</a></h4>
<p>要注意的是，Tomcat是Servlet Web的默认容器，但不是Reactive Web的默认容器。</p>
<p>同样要使用Tomcat，修改<code>pom.xml</code>:
<div class="highlight"><pre><span></span><code>        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></p>
<p>运行结果为：
<div class="highlight"><pre><span></span><code>2020-08-07 15:35:03.966  INFO 4497 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;
WebServer Type: org.springframework.boot.web.embedded.tomcat.TomcatWebServer
2020-08-07 15:35:03.977  INFO 4497 --- [           main] deep.in.spring.boot.App                  : Started App in 1.677 seconds (JVM running for 2.116)
</code></pre></div></p>
<h4 id="7-reactive-web">7. 默认的嵌入式Reactive Web容器<a class="headerlink" href="#7-reactive-web" title="Permanent link">&para;</a></h4>
<p>Netty作为默认的Reactive Web容器，若要使用，去掉容器依赖即可：
<div class="highlight"><pre><span></span><code>2020-08-07 15:36:58.625  INFO 4510 --- [           main] o.s.b.web.embedded.netty.NettyWebServer  : Netty started on port(s): 8080
WebServer Type: org.springframework.boot.web.embedded.netty.NettyWebServer
2020-08-07 15:36:58.638  INFO 4510 --- [           main] deep.in.spring.boot.App                  : Started App in 1.393 seconds (JVM running for 1.811)
</code></pre></div></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../02-spring-boot-maven-dependency/" title="Maven Dependencies" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Maven Dependencies
              </div>
            </div>
          </a>
        
        
          <a href="../04-spring-boot-understanding-auto-config/" title="Understanding Auto-Configuration" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Understanding Auto-Configuration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Nan Lei
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>