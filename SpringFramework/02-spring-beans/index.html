


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Tech Notes">
      
      
      
        <meta name="author" content="Nan Lei">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.7">
    
    
      
        <title>Spring Beans - Tech Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.b8ac9624.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.28f3ef9a.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-spring-beandefinition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-announce">
          <div class="md-announce__inner md-grid md-typeset">
            
  <a href="mailto:nanlei1987@gmail.com">
    Mail to <strong>nanlei1987@gmail.com</strong> for your queries.
  </a>

          </div>
        </aside>
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Tech Notes" class="md-header-nav__button md-logo" aria-label="Tech Notes">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Tech Notes
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Spring Beans
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/nanlei/my-notes/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../01-spring-ioc/" class="md-tabs__link md-tabs__link--active">
          Framework
        </a>
      
    </li>
  

  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../DataBase/MySQL/master-slave/" class="md-tabs__link">
          DataBase
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../DevOps/devops-centos/" class="md-tabs__link">
          DevOps
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tech Notes" class="md-nav__button md-logo" aria-label="Tech Notes">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Tech Notes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/nanlei/my-notes/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Framework
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Framework" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
    
    <label class="md-nav__link" for="nav-2-1">
      Spring Framework
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Spring Framework" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Spring Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1-1" type="checkbox" id="nav-2-1-1" checked>
    
    <label class="md-nav__link" for="nav-2-1-1">
      IoC
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="IoC" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        IoC
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01-spring-ioc/" title="Spring IoC" class="md-nav__link">
      Spring IoC
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Spring Beans
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Spring Beans" class="md-nav__link md-nav__link--active">
      Spring Beans
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-spring-beandefinition" class="md-nav__link">
    1. Spring BeanDefinition
  </a>
  
    <nav class="md-nav" aria-label="1. Spring BeanDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-beandefinitionbuilder" class="md-nav__link">
    1.1 通过BeanDefinitionBuilder构建
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-abstractbeandefinition" class="md-nav__link">
    1.2 通过AbstractBeanDefinition以及子类构建
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-spring-bean" class="md-nav__link">
    2. Spring Bean的名称
  </a>
  
    <nav class="md-nav" aria-label="2. Spring Bean的名称">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-bean-beannamegenerator" class="md-nav__link">
    2.1 Bean 名称生成器 BeanNameGenerator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-bean" class="md-nav__link">
    2.2 Bean的别名
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1-2" type="checkbox" id="nav-2-1-2">
    
    <label class="md-nav__link" for="nav-2-1-2">
      Annotation Driven
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Annotation Driven" data-md-level="3">
      <label class="md-nav__title" for="nav-2-1-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Annotation Driven
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../spring-annotation-stereotype-annotation/" title="Stereotype Annotation" class="md-nav__link">
      Stereotype Annotation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spring-annotation-composed-annotation/" title="Composed Annotation" class="md-nav__link">
      Composed Annotation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spring-annotation-attributes/" title="Annotation Attributes" class="md-nav__link">
      Annotation Attributes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Spring Boot
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Spring Boot" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Spring Boot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2-1" type="checkbox" id="nav-2-2-1">
    
    <label class="md-nav__link" for="nav-2-2-1">
      Notes
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringBoot/01-spring-boot-application/" title="Standalone Application" class="md-nav__link">
      Standalone Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringBoot/02-spring-boot-maven-dependency/" title="Maven Dependencies" class="md-nav__link">
      Maven Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringBoot/03-spring-boot-embedded-web-server/" title="Embedded Web Server" class="md-nav__link">
      Embedded Web Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringBoot/04-spring-boot-understanding-auto-config/" title="Understanding Auto-Configuration" class="md-nav__link">
      Understanding Auto-Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringBoot/05-spring-boot-understanding-prod-ready/" title="Understanding Production-Ready" class="md-nav__link">
      Understanding Production-Ready
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2-2" type="checkbox" id="nav-2-2-2">
    
    <label class="md-nav__link" for="nav-2-2-2">
      Samples
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Samples" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../SpringBoot/app-shardingsphere-master-slave-mysql/" title="Shardingsphere master-slave with MySQL" class="md-nav__link">
      Shardingsphere master-slave with MySQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      DataBase
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DataBase" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        DataBase
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      MySQL
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MySQL" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MySQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DataBase/MySQL/master-slave/" title="Master Slave" class="md-nav__link">
      Master Slave
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      MongoDB
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MongoDB" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MongoDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DataBase/MongoDB/replica-set/" title="Replica Set" class="md-nav__link">
      Replica Set
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      DevOps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="DevOps" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        DevOps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Linux
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Linux" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/devops-centos/" title="CentOS" class="md-nav__link">
      CentOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/devops-ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Docker
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docker" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../DevOps/docker/" title="Basic" class="md-nav__link">
      Basic
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      About
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="About" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="Who Am I" class="md-nav__link">
      Who Am I
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-spring-beandefinition" class="md-nav__link">
    1. Spring BeanDefinition
  </a>
  
    <nav class="md-nav" aria-label="1. Spring BeanDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-beandefinitionbuilder" class="md-nav__link">
    1.1 通过BeanDefinitionBuilder构建
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-abstractbeandefinition" class="md-nav__link">
    1.2 通过AbstractBeanDefinition以及子类构建
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-spring-bean" class="md-nav__link">
    2. Spring Bean的名称
  </a>
  
    <nav class="md-nav" aria-label="2. Spring Bean的名称">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-bean-beannamegenerator" class="md-nav__link">
    2.1 Bean 名称生成器 BeanNameGenerator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-bean" class="md-nav__link">
    2.2 Bean的别名
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nanlei/my-notes/edit/master/docs/SpringFramework/02-spring-beans.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Spring Beans</h1>
                
                <h3 align="center"><b>Spring Beans 基础</b></h3>

<h2 id="1-spring-beandefinition">1. Spring <code>BeanDefinition</code><a class="headerlink" href="#1-spring-beandefinition" title="Permanent link">&para;</a></h2>
<p><code>BeanDefinition</code>是Spring Framework中定义Bean的配置元信息接口(<code>org.springframework.beans.factory.config.BeanDefinition</code>)，包含：</p>
<ul>
<li>Bean的类名(类全名/完全限定名)</li>
<li>Bean行为元素(作用域，自动绑定模式，生命周期回调等)</li>
<li>其他Bean引用(依赖dependencies)</li>
<li>配置设置(Bean属性properties)</li>
</ul>
<p><code>BeanDefinition</code>的构建主要通过以下方式进行：</p>
<ul>
<li><code>BeanDefinitionBuilder</code></li>
<li><code>AbstractBeanDefinition</code>(本身实现了<code>BeanDefinition</code>接口)以及子类</li>
</ul>
<p><code>BeanDefinition</code>的元信息包括：</p>
<ul>
<li>Bean的类全名(必须是具体类，不能是接口或抽象类)：<code>class</code></li>
<li>Bean的名称：<code>id</code>/<code>name</code></li>
<li>Bean的作用域(<code>singleton</code>，<code>prototype</code>)：<code>scope</code></li>
<li>Bean的构造器参数(用于依赖注入)：<code>constructor-arg</code></li>
<li>Bean的属性设置(用于依赖注入)：<code>property</code></li>
<li>Bean的自动绑定模式(<code>byName</code>，<code>byType</code>等)：<code>autowire</code></li>
<li>Bean的延迟初始化模式(<code>true</code>/<code>false</code>)：<code>lazy-init</code></li>
<li>初始化回调方法：<code>init-method</code></li>
<li>销毁回调方法：<code>destroy-method</code></li>
</ul>
<h3 id="11-beandefinitionbuilder">1.1 通过<code>BeanDefinitionBuilder</code>构建<a class="headerlink" href="#11-beandefinitionbuilder" title="Permanent link">&para;</a></h3>
<p><code>BeanDefinitionBuilder</code>(<code>org.springframework.beans.factory.support.BeanDefinitionBuilder</code>)是一个构建器模式的类，提供了一系列的静态方法来辅助构建<code>BeanDefinition</code>。
<img alt="" src="../img/spring.beans.bean.definition.builder.png" /></p>
<p>首先创建<code>BeanDefinitionBuilder</code>对象，按照Bean的类型来构建：
<div class="highlight"><pre><span></span><code><span class="c1">//通过BeanDefinitionBuilder构建</span>
<span class="n">BeanDefinitionBuilder</span> <span class="n">beanDefinitionBuilder</span> <span class="o">=</span> <span class="n">BeanDefinitionBuilder</span><span class="p">.</span><span class="na">genericBeanDefinition</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div></p>
<p>获取到<code>BeanDefinitionBuilder</code>对象后，进行属性设置：
<div class="highlight"><pre><span></span><code><span class="c1">//属性设置</span>
<span class="n">beanDefinitionBuilder</span><span class="p">.</span><span class="na">addPropertyValue</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;Tom&quot;</span><span class="p">).</span><span class="na">addPropertyValue</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">);</span>
</code></pre></div></p>
<p>构建完成，获取<code>BeanDefinition</code>对象：
<div class="highlight"><pre><span></span><code><span class="c1">//获取BeanDefinition实例</span>
<span class="n">BeanDefinition</span> <span class="n">beanDefinition</span> <span class="o">=</span> <span class="n">beanDefinitionBuilder</span><span class="p">.</span><span class="na">getBeanDefinition</span><span class="p">();</span>
</code></pre></div></p>
<p>此时的<code>beanDefinition</code>还可以自定义修改，并非Bean的最终状态，因为这里只是获取<code>BeanDefinition</code>，没有注册到IoC容器中。</p>
<h3 id="12-abstractbeandefinition">1.2 通过<code>AbstractBeanDefinition</code>以及子类构建<a class="headerlink" href="#12-abstractbeandefinition" title="Permanent link">&para;</a></h3>
<p>抽象类<code>AbstractBeanDefinition</code>实现了<code>BeanDefinition</code>接口，可以使用其子类进行<code>BeanDefinition</code>构建。</p>
<p>当前Spring版本(<strong>5.2.8.RELEASE</strong>)，<code>AbstractBeanDefinition</code>的实现类有以下几个：
<img alt="" src="../img/spring.beans.abstract.bean.definition.png" /></p>
<p>这里作为示例，使用<code>GenericBeanDefinition</code>进行构建：
<div class="highlight"><pre><span></span><code><span class="c1">//通过AbstractBeanDefinition以及子类构建</span>
<span class="n">GenericBeanDefinition</span> <span class="n">genericBeanDefinition</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GenericBeanDefinition</span><span class="p">();</span>
</code></pre></div></p>
<p>创建好对象，设置Bean的类型：
<div class="highlight"><pre><span></span><code><span class="c1">//设置Bean类型</span>
<span class="n">genericBeanDefinition</span><span class="p">.</span><span class="na">setBeanClass</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div></p>
<p>继续设置参数：
<div class="highlight"><pre><span></span><code><span class="c1">//通过MutablePropertyValues批量操作</span>
<span class="n">MutablePropertyValues</span> <span class="n">mutablePropertyValues</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MutablePropertyValues</span><span class="p">();</span>
<span class="n">mutablePropertyValues</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;Jerry&quot;</span><span class="p">).</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">);</span>
</code></pre></div></p>
<p>这里设置参数的方法和使用<code>BeanDefinitionBuilder</code>方式是一致的，在<code>BeanDefinitionBuilder</code>中，其设置属性的方法为：
<div class="highlight"><pre><span></span><code>    <span class="kd">public</span> <span class="n">BeanDefinitionBuilder</span> <span class="nf">addPropertyValue</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">,</span> <span class="nd">@Nullable</span> <span class="n">Object</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">beanDefinition</span><span class="p">.</span><span class="na">getPropertyValues</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></p>
<p>此处<code>getPropertyValues()</code>返回的就是<code>MutablePropertyValues</code>类型的对象。</p>
<p>最后将属性设置到<code>BeanDefinition</code>对象中：
<div class="highlight"><pre><span></span><code><span class="n">genericBeanDefinition</span><span class="p">.</span><span class="na">setPropertyValues</span><span class="p">(</span><span class="n">mutablePropertyValues</span><span class="p">);</span>
</code></pre></div></p>
<p>和上面的<code>BeanDefinitionBuilder</code>示例一样，此时也没有将其注册到IoC容器中。</p>
<h2 id="2-spring-bean">2. Spring Bean的名称<a class="headerlink" href="#2-spring-bean" title="Permanent link">&para;</a></h2>
<p>Spring Bean可以拥有一个或者多个标识符，但在**Bean的所在容器**中，标识符必须是唯一的。通常情况下，一个Bean只有一个标识符，如果需要额外的，可以使用别名(Alias)来扩展。</p>
<p>在使用XML作为配置文件的实例中，可以使用<code>id</code>或者<code>name</code>属性来定义Bean的标识符。若要引入Bean的别名，需要使用<code>name</code>属性，并用英文字符的逗号(<code>,</code>)或者分号(<code>;</code>)来间隔名称，比如：
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
       <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/beans</span>
<span class="s">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">name=</span><span class="s">&quot;person,tom&quot;</span> <span class="na">class=</span><span class="s">&quot;deep.in.spring.ioc.overview.domain.Person&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">value=</span><span class="s">&quot;Tom&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;age&quot;</span> <span class="na">value=</span><span class="s">&quot;18&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">name=</span><span class="s">&quot;person2;jerry&quot;</span> <span class="na">class=</span><span class="s">&quot;deep.in.spring.ioc.overview.domain.Person&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">value=</span><span class="s">&quot;Jerry&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;age&quot;</span> <span class="na">value=</span><span class="s">&quot;18&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></p>
<p>获取Bean的时候可以使用如下代码：
<div class="highlight"><pre><span></span><code><span class="n">beanFactory</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;person&quot;</span><span class="p">);</span>
<span class="n">beanFactory</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;jerry&quot;</span><span class="p">);</span>
</code></pre></div></p>
<p>Bean的<code>id</code>或<code>name</code>属性并不是必须的，如果留空，容器会为Bean自动生成一个唯一的名称，例如将上面XML配置文件中的Bean的<code>name</code>属性删除，改为：
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;deep.in.spring.ioc.overview.domain.Person&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">value=</span><span class="s">&quot;Tom&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;age&quot;</span> <span class="na">value=</span><span class="s">&quot;18&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&quot;deep.in.spring.ioc.overview.domain.Person&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">value=</span><span class="s">&quot;Jerry&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;age&quot;</span> <span class="na">value=</span><span class="s">&quot;18&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
</code></pre></div></p>
<p>编写引导代码：
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">deep.in.spring.ioc.overview.domain.Person</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.BeanFactory</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.ListableBeanFactory</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DependencyLookupDemo</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">BeanFactory</span> <span class="n">beanFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="p">(</span><span class="s">&quot;classpath:/dependency-lookup.xml&quot;</span><span class="p">);</span>
        <span class="n">lookupByCollectionType</span><span class="p">(</span><span class="n">beanFactory</span><span class="p">,</span> <span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">lookupByCollectionType</span><span class="p">(</span><span class="n">BeanFactory</span> <span class="n">beanFactory</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">beanFactory</span> <span class="k">instanceof</span> <span class="n">ListableBeanFactory</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">ListableBeanFactory</span> <span class="n">listableBeanFactory</span> <span class="o">=</span> <span class="p">(</span><span class="n">ListableBeanFactory</span><span class="p">)</span> <span class="n">beanFactory</span><span class="p">;</span>
            <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="o">?&gt;</span> <span class="n">collection</span> <span class="o">=</span> <span class="n">listableBeanFactory</span><span class="p">.</span><span class="na">getBeansOfType</span><span class="p">(</span><span class="n">clazz</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Lookup By collection: &quot;</span> <span class="o">+</span> <span class="n">collection</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>运行程序，可以得到：
<div class="highlight"><pre><span></span><code>Lookup By collection: {deep.in.spring.ioc.overview.domain.Person#0=Person{name=&#39;Tom&#39;, age=18}, deep.in.spring.ioc.overview.domain.Person#1=Person{name=&#39;Jerry&#39;, age=18}}
</code></pre></div></p>
<p><code>deep.in.spring.ioc.overview.domain.Person#0</code>和<code>deep.in.spring.ioc.overview.domain.Person#1</code>就是容器自动生成的Bean的名称。</p>
<p>尽管Bean的命名没有限制，作为代码规约，建议使用驼峰命名方式，也符合Java的命名约定。</p>
<h3 id="21-bean-beannamegenerator">2.1 Bean 名称生成器 <code>BeanNameGenerator</code><a class="headerlink" href="#21-bean-beannamegenerator" title="Permanent link">&para;</a></h3>
<p>Spring Framework 2.0.3引入了Bean名称生成器<code>BeanNameGenerator</code>，其定义如下：
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">org.springframework.beans.factory.support</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.config.BeanDefinition</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Strategy interface for generating bean names for bean definitions.</span>
<span class="cm"> *</span>
<span class="cm"> * @author Juergen Hoeller</span>
<span class="cm"> * @since 2.0.3</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BeanNameGenerator</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Generate a bean name for the given bean definition.</span>
<span class="cm">     * @param definition the bean definition to generate a name for</span>
<span class="cm">     * @param registry the bean definition registry that the given definition</span>
<span class="cm">     * is supposed to be registered with</span>
<span class="cm">     * @return the generated bean name</span>
<span class="cm">     */</span>
    <span class="n">String</span> <span class="nf">generateBeanName</span><span class="p">(</span><span class="n">BeanDefinition</span> <span class="n">definition</span><span class="p">,</span> <span class="n">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></p>
<p>该接口只定义了一个方法，用于返回Bean的名称。</p>
<p>其实现类，有3个(**5.2.8.RELEASE**版本)：
<img alt="" src="../img/spring.beans.name.generator.png" /></p>
<p>其中<code>FullyQualifiedAnnotationBeanNameGenerator</code>(Spring 5.2.3引入)继承自 <code>AnnotationBeanNameGenerator</code>，是其类全名的实现版本。</p>
<p>那么<code>BeanNameGenerator</code>的主要实现是2种，即<code>DefaultBeanNameGenerator</code>(默认实现)和<code>AnnotationBeanNameGenerator</code>(基于注解扫描的实现，Spring 2.5引入)。</p>
<p>Spring Framework官方文档对Bean的名称生成有解释，<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanname">可以参考</a></p>
<blockquote>
<p>With component scanning in the classpath, Spring generates bean names for unnamed components, following the rules described earlier: essentially, taking the simple class name and turning its initial character to lower-case. However, in the (unusual) special case when there is more than one character and both the first and second characters are upper case, the original casing gets preserved. These are the same rules as defined by <code>java.beans.Introspector.decapitalize</code> (which Spring uses here).</p>
</blockquote>
<p><code>DefaultBeanNameGenerator</code>的实现比较简单：
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">org.springframework.beans.factory.support</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.config.BeanDefinition</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Default implementation of the {@link BeanNameGenerator} interface, delegating to</span>
<span class="cm"> * {@link BeanDefinitionReaderUtils#generateBeanName(BeanDefinition, BeanDefinitionRegistry)}.</span>
<span class="cm"> *</span>
<span class="cm"> * @author Juergen Hoeller</span>
<span class="cm"> * @since 2.0.3</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultBeanNameGenerator</span> <span class="kd">implements</span> <span class="n">BeanNameGenerator</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * A convenient constant for a default {@code DefaultBeanNameGenerator} instance,</span>
<span class="cm">     * as used for {@link AbstractBeanDefinitionReader} setup.</span>
<span class="cm">     * @since 5.2</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">DefaultBeanNameGenerator</span> <span class="n">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultBeanNameGenerator</span><span class="p">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">generateBeanName</span><span class="p">(</span><span class="n">BeanDefinition</span> <span class="n">definition</span><span class="p">,</span> <span class="n">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">BeanDefinitionReaderUtils</span><span class="p">.</span><span class="na">generateBeanName</span><span class="p">(</span><span class="n">definition</span><span class="p">,</span> <span class="n">registry</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>生成Bean名称的方法借助外部工具类来完成：
<div class="highlight"><pre><span></span><code>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GENERATED_BEAN_NAME_SEPARATOR</span> <span class="o">=</span> <span class="n">BeanFactoryUtils</span><span class="p">.</span><span class="na">GENERATED_BEAN_NAME_SEPARATOR</span><span class="p">;</span> <span class="c1">//#</span>
    <span class="p">...</span>
    <span class="cm">/**</span>
<span class="cm">     * Generate a bean name for the given bean definition, unique within the</span>
<span class="cm">     * given bean factory.</span>
<span class="cm">     * @param definition the bean definition to generate a bean name for</span>
<span class="cm">     * @param registry the bean factory that the definition is going to be</span>
<span class="cm">     * registered with (to check for existing bean names)</span>
<span class="cm">     * @param isInnerBean whether the given bean definition will be registered</span>
<span class="cm">     * as inner bean or as top-level bean (allowing for special name generation</span>
<span class="cm">     * for inner beans versus top-level beans)</span>
<span class="cm">     * @return the generated bean name</span>
<span class="cm">     * @throws BeanDefinitionStoreException if no unique name can be generated</span>
<span class="cm">     * for the given bean definition</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateBeanName</span><span class="p">(</span>
            <span class="n">BeanDefinition</span> <span class="n">definition</span><span class="p">,</span> <span class="n">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="p">,</span> <span class="kt">boolean</span> <span class="n">isInnerBean</span><span class="p">)</span>
            <span class="kd">throws</span> <span class="n">BeanDefinitionStoreException</span> <span class="p">{</span>

        <span class="n">String</span> <span class="n">generatedBeanName</span> <span class="o">=</span> <span class="n">definition</span><span class="p">.</span><span class="na">getBeanClassName</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">generatedBeanName</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">definition</span><span class="p">.</span><span class="na">getParentName</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">generatedBeanName</span> <span class="o">=</span> <span class="n">definition</span><span class="p">.</span><span class="na">getParentName</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;$child&quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">definition</span><span class="p">.</span><span class="na">getFactoryBeanName</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">generatedBeanName</span> <span class="o">=</span> <span class="n">definition</span><span class="p">.</span><span class="na">getFactoryBeanName</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;$created&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">hasText</span><span class="p">(</span><span class="n">generatedBeanName</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">BeanDefinitionStoreException</span><span class="p">(</span><span class="s">&quot;Unnamed bean definition specifies neither &quot;</span> <span class="o">+</span>
                    <span class="s">&quot;&#39;class&#39; nor &#39;parent&#39; nor &#39;factory-bean&#39; - can&#39;t generate bean name&quot;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">isInnerBean</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Inner bean: generate identity hashcode suffix.</span>
            <span class="k">return</span> <span class="n">generatedBeanName</span> <span class="o">+</span> <span class="n">GENERATED_BEAN_NAME_SEPARATOR</span> <span class="o">+</span> <span class="n">ObjectUtils</span><span class="p">.</span><span class="na">getIdentityHexString</span><span class="p">(</span><span class="n">definition</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Top-level bean: use plain class name with unique suffix if necessary.</span>
        <span class="k">return</span> <span class="n">uniqueBeanName</span><span class="p">(</span><span class="n">generatedBeanName</span><span class="p">,</span> <span class="n">registry</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Turn the given bean name into a unique bean name for the given bean factory,</span>
<span class="cm">     * appending a unique counter as suffix if necessary.</span>
<span class="cm">     * @param beanName the original bean name</span>
<span class="cm">     * @param registry the bean factory that the definition is going to be</span>
<span class="cm">     * registered with (to check for existing bean names)</span>
<span class="cm">     * @return the unique bean name to use</span>
<span class="cm">     * @since 5.1</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">uniqueBeanName</span><span class="p">(</span><span class="n">String</span> <span class="n">beanName</span><span class="p">,</span> <span class="n">BeanDefinitionRegistry</span> <span class="n">registry</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="n">beanName</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">counter</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

        <span class="c1">// Increase counter until the id is unique.</span>
        <span class="n">String</span> <span class="n">prefix</span> <span class="o">=</span> <span class="n">beanName</span> <span class="o">+</span> <span class="n">GENERATED_BEAN_NAME_SEPARATOR</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">counter</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">registry</span><span class="p">.</span><span class="na">containsBeanDefinition</span><span class="p">(</span><span class="n">id</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">counter</span><span class="o">++</span><span class="p">;</span>
            <span class="n">id</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">counter</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">id</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">...</span>
</code></pre></div></p>
<p>根据获取到的Bean的类名，进行下一步处理。如果是内部类，就是<code>类名#哈希值</code>的格式，如果是常规类，就是<code>类名#从0开始的数字</code>格式。</p>
<p><code>AnnotationBeanNameGenerator</code>对Spring的模式注解(<code>org.springframework.stereotype.Component</code>及其派生注解)，<code>javax.annotation.ManagedBean</code>注解，<code>javax.inject.Named</code>有特殊处理。对其余注解也有默认规则，具体可以参考源码。</p>
<p>综上，Spring对Bean的名称生成有自己的实现，也就是不人为指定的时候，Bean也有自己的名称。自行指定可以使用<code>id</code>或者<code>name</code>属性(XML配置方式)，<code>value</code>属性(注解配置方式)。</p>
<h3 id="22-bean">2.2 Bean的别名<a class="headerlink" href="#22-bean" title="Permanent link">&para;</a></h3>
<p>Bean的别名(Alias)的用途：</p>
<ul>
<li>复用现有的BeanDefinition</li>
<li>使命名更佳场景化，比如</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;alias</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">alias=</span><span class="s">&quot;moduleA-dataSource&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;alias</span> <span class="na">name=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">alias=</span><span class="s">&quot;moduleB-dataSource&quot;</span><span class="nt">&gt;</span>
</code></pre></div>

<p>新建项目<code>spring-bean</code>，为了复用项目<code>ioc-overview</code>中的组件，其<code>pom.xml</code>中可以添加其依赖：
<div class="highlight"><pre><span></span><code>    <span class="nt">&lt;parent&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>deep-in-spring-boot<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>deep-in-spring-boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;relativePath&gt;</span>../pom.xml<span class="nt">&lt;/relativePath&gt;</span>
    <span class="nt">&lt;/parent&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

    <span class="nt">&lt;artifactId&gt;</span>spring-bean<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="c">&lt;!-- Spring IoC 核心依赖 --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>5.2.8.RELEASE<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>

        <span class="c">&lt;!-- 复用ioc-overview --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>${groupId}<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>ioc-overview<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div></p>
<p>在<code>resources</code>目录下新建<code>bean-definitions.xml</code></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../01-spring-ioc/" title="Spring IoC" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Spring IoC
              </div>
            </div>
          </a>
        
        
          <a href="../spring-annotation-stereotype-annotation/" title="Stereotype Annotation" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Stereotype Annotation
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Nan Lei
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>